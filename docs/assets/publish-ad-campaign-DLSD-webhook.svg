<?plantuml 1.2026.2beta3?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1615px" preserveAspectRatio="none" style="width:2608px;height:1615px;background:#FFFFFF;" version="1.1" viewBox="0 0 2608 1615" width="2608px" zoomAndPan="magnify"><title>&lt;u&gt;Design Level Sequence Diagram&lt;/u&gt;
Handle Checkout Session Completed (Webhook)</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="254.3447" x="1178.3425" y="27.9951">Design Level Sequence Diagram</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="380.4678" x="1115.281" y="44.292">Handle Checkout Session Completed (Webhook)</text><g><title>..control..</title><rect fill="#FFFFFF" height="1302.7109" style="stroke:#181818;stroke-width:1;" width="10" x="305.2227" y="197.4531"/></g><g><title>..control..</title><rect fill="#FFFFFF" height="1155.0469" style="stroke:#181818;stroke-width:1;" width="10" x="806.6313" y="308.9844"/></g><g><title>..repository..</title><rect fill="#FFFFFF" height="87.3984" style="stroke:#181818;stroke-width:1;" width="10" x="1047.5161" y="338.1172"/></g><g><title>..repository..</title><rect fill="#FFFFFF" height="87.3984" style="stroke:#181818;stroke-width:1;" width="10" x="1047.5161" y="563.1797"/></g><g><title>..repository..</title><rect fill="#FFFFFF" height="87.3984" style="stroke:#181818;stroke-width:1;" width="10" x="1376.9448" y="679.7109"/></g><g><title>..repository..</title><rect fill="#FFFFFF" height="72.2656" style="stroke:#181818;stroke-width:1;" width="10" x="1376.9448" y="861.6406"/></g><g><title>..repository..</title><rect fill="#FFFFFF" height="72.2656" style="stroke:#181818;stroke-width:1;" width="10" x="1656.0029" y="963.0391"/></g><g><title>..repository..</title><rect fill="#FFFFFF" height="72.2656" style="stroke:#181818;stroke-width:1;" width="10" x="1825.6016" y="1064.4375"/></g><g><title>..repository..</title><rect fill="#FFFFFF" height="72.2656" style="stroke:#181818;stroke-width:1;" width="10" x="2008.8447" y="1165.8359"/></g><g><title>..control..</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="2180.4224" y="1291.3672"/></g><g><title>..control..</title><rect fill="#FFFFFF" height="67.6992" style="stroke:#181818;stroke-width:1;" width="10" x="2325.0869" y="1360.1992"/></g><g><title>..database..</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="2433.7559" y="367.25"/></g><g><title>..database..</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="2433.7559" y="592.3125"/></g><g><title>..database..</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="2433.7559" y="708.8438"/></g><g><title>..database..</title><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1;" width="10" x="2433.7559" y="890.7734"/></g><g><title>..database..</title><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1;" width="10" x="2433.7559" y="992.1719"/></g><g><title>..database..</title><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1;" width="10" x="2433.7559" y="1093.5703"/></g><g><title>..database..</title><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1;" width="10" x="2433.7559" y="1194.9688"/></g><g><title>..external..</title><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1;" width="10" x="2532.4023" y="1399.8984"/></g><rect fill="none" height="1201.3125" style="stroke:#000000;stroke-width:1.5;" width="2378.479" x="223.5508" y="270.7188"/><rect fill="none" height="182.7969" style="stroke:#000000;stroke-width:1.5;" width="2020.0298" x="572" y="1253.1016"/><g class="participant-lifeline" data-entity-uid="part1" data-qualified-name="StripeAPI" id="part1-lifeline"><g><title>..external..</title><rect fill="#000000" fill-opacity="0.00000" height="1366.9766" width="8" x="41.6147" y="151.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="45" x2="45" y1="151.1875" y2="1518.1641"/></g></g><g class="participant-lifeline" data-entity-uid="part2" data-qualified-name="Controller" id="part2-lifeline"><g><title>..control..</title><rect fill="#000000" fill-opacity="0.00000" height="1366.9766" width="8" x="306.2227" y="151.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="309.5508" x2="309.5508" y1="151.1875" y2="1518.1641"/></g></g><g class="participant-lifeline" data-entity-uid="part3" data-qualified-name="StripeUtil" id="part3-lifeline"><g><title>..utility..</title><rect fill="#000000" fill-opacity="0.00000" height="1366.9766" width="8" x="613.7515" y="151.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="617.5884" x2="617.5884" y1="151.1875" y2="1518.1641"/></g></g><g class="participant-lifeline" data-entity-uid="part4" data-qualified-name="Service" id="part4-lifeline"><g><title>..control..</title><rect fill="#000000" fill-opacity="0.00000" height="1366.9766" width="8" x="807.6313" y="151.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="810.9146" x2="810.9146" y1="151.1875" y2="1518.1641"/></g></g><g class="participant-lifeline" data-entity-uid="part5" data-qualified-name="PaymentRepo" id="part5-lifeline"><g><title>..repository..</title><rect fill="#000000" fill-opacity="0.00000" height="1366.9766" width="8" x="1048.5161" y="151.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1051.9282" x2="1051.9282" y1="151.1875" y2="1518.1641"/></g></g><g class="participant-lifeline" data-entity-uid="part6" data-qualified-name="Payment" id="part6-lifeline"><g><title>..entity..</title><rect fill="#000000" fill-opacity="0.00000" height="1366.9766" width="8" x="1218.1558" y="151.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1222.104" x2="1222.104" y1="151.1875" y2="1518.1641"/></g></g><g class="participant-lifeline" data-entity-uid="part7" data-qualified-name="ReservationRepo" id="part7-lifeline"><g><title>..repository..</title><rect fill="#000000" fill-opacity="0.00000" height="1366.9766" width="8" x="1377.9448" y="151.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1381.2075" x2="1381.2075" y1="151.1875" y2="1518.1641"/></g></g><g class="participant-lifeline" data-entity-uid="part8" data-qualified-name="Reservation" id="part8-lifeline"><g><title>..entity..</title><rect fill="#000000" fill-opacity="0.00000" height="1366.9766" width="8" x="1527.8833" y="151.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1531.6821" x2="1531.6821" y1="151.1875" y2="1518.1641"/></g></g><g class="participant-lifeline" data-entity-uid="part9" data-qualified-name="MediaRepo" id="part9-lifeline"><g><title>..repository..</title><rect fill="#000000" fill-opacity="0.00000" height="1366.9766" width="8" x="1657.0029" y="151.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1660.0845" x2="1660.0845" y1="151.1875" y2="1518.1641"/></g></g><g class="participant-lifeline" data-entity-uid="part10" data-qualified-name="CampaignRepo" id="part10-lifeline"><g><title>..repository..</title><rect fill="#000000" fill-opacity="0.00000" height="1366.9766" width="8" x="1826.6016" y="151.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1829.9214" x2="1829.9214" y1="151.1875" y2="1518.1641"/></g></g><g class="participant-lifeline" data-entity-uid="part11" data-qualified-name="EmployeeRepo" id="part11-lifeline"><g><title>..repository..</title><rect fill="#000000" fill-opacity="0.00000" height="1366.9766" width="8" x="2009.8447" y="151.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="2013.2817" x2="2013.2817" y1="151.1875" y2="1518.1641"/></g></g><g class="participant-lifeline" data-entity-uid="part12" data-qualified-name="CampaignService" id="part12-lifeline"><g><title>..control..</title><rect fill="#000000" fill-opacity="0.00000" height="1366.9766" width="8" x="2181.4224" y="151.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="2185.4077" x2="2185.4077" y1="151.1875" y2="1518.1641"/></g></g><g class="participant-lifeline" data-entity-uid="part13" data-qualified-name="EmailService" id="part13-lifeline"><g><title>..control..</title><rect fill="#000000" fill-opacity="0.00000" height="1366.9766" width="8" x="2326.0869" y="151.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="2329.437" x2="2329.437" y1="151.1875" y2="1518.1641"/></g></g><g class="participant-lifeline" data-entity-uid="part14" data-qualified-name="DB" id="part14-lifeline"><g><title>..database..</title><rect fill="#000000" fill-opacity="0.00000" height="1366.9766" width="8" x="2434.7559" y="151.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="2438.7368" x2="2438.7368" y1="151.1875" y2="1518.1641"/></g></g><g class="participant-lifeline" data-entity-uid="part15" data-qualified-name="GmailAPI" id="part15-lifeline"><g><title>..external..</title><rect fill="#000000" fill-opacity="0.00000" height="1366.9766" width="8" x="2533.4023" y="151.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="2536.7749" x2="2536.7749" y1="151.1875" y2="1518.1641"/></g></g><g class="participant participant-head" data-entity-uid="part1" data-qualified-name="StripeAPI" id="part1-head"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75.2295" x="5" y="131.5889">&#171;external&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68.1201" x="8.5547" y="147.8857">Stripe API</text><ellipse cx="45.6147" cy="67.0938" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M45.6147,75.0938 L45.6147,102.0938 M32.6147,83.0938 L58.6147,83.0938 M45.6147,102.0938 L32.6147,117.0938 M45.6147,102.0938 L58.6147,117.0938" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-entity-uid="part1" data-qualified-name="StripeAPI" id="part1-tail"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75.2295" x="5" y="1530.1592">&#171;external&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68.1201" x="8.5547" y="1546.4561">Stripe API</text><ellipse cx="45.6147" cy="1558.2578" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M45.6147,1566.2578 L45.6147,1593.2578 M32.6147,1574.2578 L58.6147,1574.2578 M45.6147,1593.2578 L32.6147,1608.2578 M45.6147,1593.2578 L58.6147,1608.2578" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-entity-uid="part2" data-qualified-name="Controller" id="part2-head"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="153.3438" x="233.5508" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65.9668" x="277.2393" y="107.292">&#171;control&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132.2344" x="244.1055" y="123.5889">webhookController</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139.3438" x="240.5508" y="139.8857">:WebhookController</text></g><g class="participant participant-tail" data-entity-uid="part2" data-qualified-name="Controller" id="part2-tail"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="153.3438" x="233.5508" y="1517.1641"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65.9668" x="277.2393" y="1537.1592">&#171;control&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132.2344" x="244.1055" y="1553.4561">webhookController</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139.3438" x="240.5508" y="1569.7529">:WebhookController</text></g><g class="participant participant-head" data-entity-uid="part3" data-qualified-name="StripeUtil" id="part3-head"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="190.3262" x="522.5884" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.9365" x="589.2832" y="107.292">&#171;utility&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63.0615" x="586.2207" y="123.5889">webhook</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="176.3262" x="529.5884" y="139.8857">:com.stripe.net.Webhook</text></g><g class="participant participant-tail" data-entity-uid="part3" data-qualified-name="StripeUtil" id="part3-tail"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="190.3262" x="522.5884" y="1517.1641"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.9365" x="589.2832" y="1537.1592">&#171;utility&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63.0615" x="586.2207" y="1553.4561">webhook</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="176.3262" x="529.5884" y="1569.7529">:com.stripe.net.Webhook</text></g><g class="participant participant-head" data-entity-uid="part4" data-qualified-name="Service" id="part4-head"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="177.4336" x="722.9146" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65.9668" x="778.6479" y="107.292">&#171;control&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157.124" x="733.0693" y="123.5889">stripeWebhookService</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163.4336" x="729.9146" y="139.8857">:StripeWebhookService</text></g><g class="participant participant-tail" data-entity-uid="part4" data-qualified-name="Service" id="part4-tail"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="177.4336" x="722.9146" y="1517.1641"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65.9668" x="778.6479" y="1537.1592">&#171;control&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157.124" x="733.0693" y="1553.4561">stripeWebhookService</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163.4336" x="729.9146" y="1569.7529">:StripeWebhookService</text></g><g class="participant participant-head" data-entity-uid="part5" data-qualified-name="PaymentRepo" id="part5-head"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="197.1758" x="953.9282" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.2314" x="1008.4004" y="107.292">&#171;repository&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="178.9033" x="963.0645" y="123.5889">paymentIntentRepository</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="183.1758" x="960.9282" y="139.8857">:PaymentIntentRepository</text></g><g class="participant participant-tail" data-entity-uid="part5" data-qualified-name="PaymentRepo" id="part5-tail"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="197.1758" x="953.9282" y="1517.1641"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.2314" x="1008.4004" y="1537.1592">&#171;repository&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="178.9033" x="963.0645" y="1553.4561">paymentIntentRepository</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="183.1758" x="960.9282" y="1569.7529">:PaymentIntentRepository</text></g><g class="participant participant-head" data-entity-uid="part6" data-qualified-name="Payment" id="part6-head"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122.1035" x="1161.104" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.7705" x="1193.2705" y="107.292">&#171;entity&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103.8311" x="1170.2402" y="123.5889">paymentIntent</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108.1035" x="1168.104" y="139.8857">:PaymentIntent</text></g><g class="participant participant-tail" data-entity-uid="part6" data-qualified-name="Payment" id="part6-tail"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122.1035" x="1161.104" y="1517.1641"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.7705" x="1193.2705" y="1537.1592">&#171;entity&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103.8311" x="1170.2402" y="1553.4561">paymentIntent</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108.1035" x="1168.104" y="1569.7529">:PaymentIntent</text></g><g class="participant participant-head" data-entity-uid="part7" data-qualified-name="ReservationRepo" id="part7-head"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="177.4746" x="1293.2075" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.2314" x="1337.8291" y="107.292">&#171;repository&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154.7861" x="1304.5518" y="123.5889">reservationRepository</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163.4746" x="1300.2075" y="139.8857">:ReservationRepository</text></g><g class="participant participant-tail" data-entity-uid="part7" data-qualified-name="ReservationRepo" id="part7-tail"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="177.4746" x="1293.2075" y="1517.1641"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.2314" x="1337.8291" y="1537.1592">&#171;repository&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154.7861" x="1304.5518" y="1553.4561">reservationRepository</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163.4746" x="1300.2075" y="1569.7529">:ReservationRepository</text></g><g class="participant participant-head" data-entity-uid="part8" data-qualified-name="Reservation" id="part8-head"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102.4023" x="1480.6821" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.7705" x="1502.998" y="107.292">&#171;entity&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79.7139" x="1492.0264" y="123.5889">reservation</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.4023" x="1487.6821" y="139.8857">:Reservation</text></g><g class="participant participant-tail" data-entity-uid="part8" data-qualified-name="Reservation" id="part8-tail"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102.4023" x="1480.6821" y="1517.1641"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.7705" x="1502.998" y="1537.1592">&#171;entity&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79.7139" x="1492.0264" y="1553.4561">reservation</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.4023" x="1487.6821" y="1569.7529">:Reservation</text></g><g class="participant participant-head" data-entity-uid="part9" data-qualified-name="MediaRepo" id="part9-head"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="135.8369" x="1593.0845" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.2314" x="1616.8872" y="107.292">&#171;repository&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118.6787" x="1601.6636" y="123.5889">mediaRepository</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121.8369" x="1600.0845" y="139.8857">:MediaRepository</text></g><g class="participant participant-tail" data-entity-uid="part9" data-qualified-name="MediaRepo" id="part9-tail"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="135.8369" x="1593.0845" y="1517.1641"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.2314" x="1616.8872" y="1537.1592">&#171;repository&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118.6787" x="1601.6636" y="1553.4561">mediaRepository</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121.8369" x="1600.0845" y="1569.7529">:MediaRepository</text></g><g class="participant participant-head" data-entity-uid="part10" data-qualified-name="CampaignRepo" id="part10-head"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="183.3604" x="1738.9214" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.2314" x="1786.4858" y="107.292">&#171;repository&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163.6455" x="1748.7788" y="123.5889">adCampaignRepository</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="169.3604" x="1745.9214" y="139.8857">:AdCampaignRepository</text></g><g class="participant participant-tail" data-entity-uid="part10" data-qualified-name="CampaignRepo" id="part10-tail"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="183.3604" x="1738.9214" y="1517.1641"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.2314" x="1786.4858" y="1537.1592">&#171;repository&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163.6455" x="1748.7788" y="1553.4561">adCampaignRepository</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="169.3604" x="1745.9214" y="1569.7529">:AdCampaignRepository</text></g><g class="participant participant-head" data-entity-uid="part11" data-qualified-name="EmployeeRepo" id="part11-head"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="163.126" x="1932.2817" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.2314" x="1969.729" y="107.292">&#171;repository&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="144.1768" x="1941.7563" y="123.5889">employeeRepository</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149.126" x="1939.2817" y="139.8857">:EmployeeRepository</text></g><g class="participant participant-tail" data-entity-uid="part11" data-qualified-name="EmployeeRepo" id="part11-tail"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="163.126" x="1932.2817" y="1517.1641"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.2314" x="1969.729" y="1537.1592">&#171;repository&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="144.1768" x="1941.7563" y="1553.4561">employeeRepository</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149.126" x="1939.2817" y="1569.7529">:EmployeeRepository</text></g><g class="participant participant-head" data-entity-uid="part12" data-qualified-name="CampaignService" id="part12-head"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="160.0293" x="2105.4077" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65.9668" x="2152.439" y="107.292">&#171;control&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140.3145" x="2115.2651" y="123.5889">adCampaignService</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146.0293" x="2112.4077" y="139.8857">:AdCampaignService</text></g><g class="participant participant-tail" data-entity-uid="part12" data-qualified-name="CampaignService" id="part12-tail"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="160.0293" x="2105.4077" y="1517.1641"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65.9668" x="2152.439" y="1537.1592">&#171;control&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140.3145" x="2115.2651" y="1553.4561">adCampaignService</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146.0293" x="2112.4077" y="1569.7529">:AdCampaignService</text></g><g class="participant participant-head" data-entity-uid="part13" data-qualified-name="EmailService" id="part13-head"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="109.2998" x="2275.437" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65.9668" x="2297.1035" y="107.292">&#171;control&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90.3506" x="2284.9116" y="123.5889">emailService</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95.2998" x="2282.437" y="139.8857">:EmailService</text></g><g class="participant participant-tail" data-entity-uid="part13" data-qualified-name="EmailService" id="part13-tail"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="109.2998" x="2275.437" y="1517.1641"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65.9668" x="2297.1035" y="1537.1592">&#171;control&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90.3506" x="2284.9116" y="1553.4561">emailService</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95.2998" x="2282.437" y="1569.7529">:EmailService</text></g><g class="participant participant-head" data-entity-uid="part14" data-qualified-name="DB" id="part14-head"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82.0381" x="2394.7368" y="131.5889">&#171;database&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71.5176" x="2399.9971" y="147.8857">:Database</text><path d="M2420.7559,82.5938 C2420.7559,72.5938 2438.7559,72.5938 2438.7559,72.5938 C2438.7559,72.5938 2456.7559,72.5938 2456.7559,82.5938 L2456.7559,108.5938 C2456.7559,118.5938 2438.7559,118.5938 2438.7559,118.5938 C2438.7559,118.5938 2420.7559,118.5938 2420.7559,108.5938 L2420.7559,82.5938" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M2420.7559,82.5938 C2420.7559,92.5938 2438.7559,92.5938 2438.7559,92.5938 C2438.7559,92.5938 2456.7559,92.5938 2456.7559,82.5938" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-entity-uid="part14" data-qualified-name="DB" id="part14-tail"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82.0381" x="2394.7368" y="1530.1592">&#171;database&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71.5176" x="2399.9971" y="1546.4561">:Database</text><path d="M2420.7559,1559.7578 C2420.7559,1549.7578 2438.7559,1549.7578 2438.7559,1549.7578 C2438.7559,1549.7578 2456.7559,1549.7578 2456.7559,1559.7578 L2456.7559,1585.7578 C2456.7559,1595.7578 2438.7559,1595.7578 2438.7559,1595.7578 C2438.7559,1595.7578 2420.7559,1595.7578 2420.7559,1585.7578 L2420.7559,1559.7578" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M2420.7559,1559.7578 C2420.7559,1569.7578 2438.7559,1569.7578 2438.7559,1569.7578 C2438.7559,1569.7578 2456.7559,1569.7578 2456.7559,1559.7578" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-entity-uid="part15" data-qualified-name="GmailAPI" id="part15-head"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75.2295" x="2496.7876" y="131.5889">&#171;external&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83.2549" x="2492.7749" y="147.8857">Gmail SMTP</text><ellipse cx="2537.4023" cy="67.0938" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M2537.4023,75.0938 L2537.4023,102.0938 M2524.4023,83.0938 L2550.4023,83.0938 M2537.4023,102.0938 L2524.4023,117.0938 M2537.4023,102.0938 L2550.4023,117.0938" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-entity-uid="part15" data-qualified-name="GmailAPI" id="part15-tail"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75.2295" x="2496.7876" y="1530.1592">&#171;external&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83.2549" x="2492.7749" y="1546.4561">Gmail SMTP</text><ellipse cx="2537.4023" cy="1558.2578" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M2537.4023,1566.2578 L2537.4023,1593.2578 M2524.4023,1574.2578 L2550.4023,1574.2578 M2537.4023,1593.2578 L2524.4023,1608.2578 M2537.4023,1593.2578 L2550.4023,1608.2578" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g><title>..control..</title><rect fill="#FFFFFF" height="1302.7109" style="stroke:#181818;stroke-width:1;" width="10" x="305.2227" y="197.4531"/></g><g><title>..control..</title><rect fill="#FFFFFF" height="1155.0469" style="stroke:#181818;stroke-width:1;" width="10" x="806.6313" y="308.9844"/></g><g><title>..repository..</title><rect fill="#FFFFFF" height="87.3984" style="stroke:#181818;stroke-width:1;" width="10" x="1047.5161" y="338.1172"/></g><g><title>..repository..</title><rect fill="#FFFFFF" height="87.3984" style="stroke:#181818;stroke-width:1;" width="10" x="1047.5161" y="563.1797"/></g><g><title>..repository..</title><rect fill="#FFFFFF" height="87.3984" style="stroke:#181818;stroke-width:1;" width="10" x="1376.9448" y="679.7109"/></g><g><title>..repository..</title><rect fill="#FFFFFF" height="72.2656" style="stroke:#181818;stroke-width:1;" width="10" x="1376.9448" y="861.6406"/></g><g><title>..repository..</title><rect fill="#FFFFFF" height="72.2656" style="stroke:#181818;stroke-width:1;" width="10" x="1656.0029" y="963.0391"/></g><g><title>..repository..</title><rect fill="#FFFFFF" height="72.2656" style="stroke:#181818;stroke-width:1;" width="10" x="1825.6016" y="1064.4375"/></g><g><title>..repository..</title><rect fill="#FFFFFF" height="72.2656" style="stroke:#181818;stroke-width:1;" width="10" x="2008.8447" y="1165.8359"/></g><g><title>..control..</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="2180.4224" y="1291.3672"/></g><g><title>..control..</title><rect fill="#FFFFFF" height="67.6992" style="stroke:#181818;stroke-width:1;" width="10" x="2325.0869" y="1360.1992"/></g><g><title>..database..</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="2433.7559" y="367.25"/></g><g><title>..database..</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="2433.7559" y="592.3125"/></g><g><title>..database..</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="2433.7559" y="708.8438"/></g><g><title>..database..</title><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1;" width="10" x="2433.7559" y="890.7734"/></g><g><title>..database..</title><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1;" width="10" x="2433.7559" y="992.1719"/></g><g><title>..database..</title><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1;" width="10" x="2433.7559" y="1093.5703"/></g><g><title>..database..</title><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1;" width="10" x="2433.7559" y="1194.9688"/></g><g><title>..external..</title><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1;" width="10" x="2532.4023" y="1399.8984"/></g><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg1"><polygon fill="#181818" points="293.2227,193.4531,303.2227,197.4531,293.2227,201.4531,297.2227,197.4531" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="45.6147" x2="299.2227" y1="197.4531" y2="197.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187.3447" x="52.6147" y="177.2544">POST /api/v1/stripe/webhook</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="240.6079" x="52.6147" y="192.3872">(Event: checkout.session.completed)</text></g><g class="message" data-entity-1="part2" data-entity-2="part3" id="msg2"><polygon fill="#181818" points="605.7515,222.5859,615.7515,226.5859,605.7515,230.5859,609.7515,226.5859" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="315.2227" x2="611.7515" y1="226.5859" y2="226.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="278.5288" x="322.2227" y="221.52">constructEvent(payload, signature, secret)</text></g><g class="message" data-entity-1="part3" data-entity-2="part2" id="msg3"><polygon fill="#181818" points="326.2227,251.7188,316.2227,255.7188,326.2227,259.7188,322.2227,255.7188" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="320.2227" x2="616.7515" y1="255.7188" y2="255.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="37.0259" x="332.2227" y="250.6528">event</text></g><path d="M223.5508,270.7188 L287.9937,270.7188 L287.9937,277.8516 L277.9937,287.8516 L223.5508,287.8516 L223.5508,270.7188" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="1201.3125" style="stroke:#000000;stroke-width:1.5;" width="2378.479" x="223.5508" y="270.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="238.5508" y="283.7856">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="239.4165" x="302.9937" y="282.9292">[Event is checkout.session.completed]</text><g class="message" data-entity-1="part2" data-entity-2="part4" id="msg4"><polygon fill="#181818" points="794.6313,304.9844,804.6313,308.9844,794.6313,312.9844,798.6313,308.9844" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="315.2227" x2="800.6313" y1="308.9844" y2="308.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="273.2603" x="322.2227" y="303.9185">handleCheckoutSessionCompleted(event)</text></g><g class="message" data-entity-1="part4" data-entity-2="part5" id="msg5"><polygon fill="#181818" points="1035.5161,334.1172,1045.5161,338.1172,1035.5161,342.1172,1039.5161,338.1172" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="816.6313" x2="1041.5161" y1="338.1172" y2="338.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211.8848" x="823.6313" y="333.0513">findByStripeSessionId(sessionId)</text></g><g class="message" data-entity-1="part5" data-entity-2="part14" id="msg6"><polygon fill="#181818" points="2421.7559,363.25,2431.7559,367.25,2421.7559,371.25,2425.7559,367.25" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1057.5161" x2="2427.7559" y1="367.25" y2="367.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="376.0923" x="1064.5161" y="362.1841">SELECT paymentIntent where stripeSessionId = sessionId</text></g><g class="message" data-entity-1="part14" data-entity-2="part5" id="msg7"><polygon fill="#181818" points="1068.5161,392.3828,1058.5161,396.3828,1068.5161,400.3828,1064.5161,396.3828" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="1062.5161" x2="2437.7559" y1="396.3828" y2="396.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96.4146" x="1074.5161" y="391.3169">paymentIntent</text></g><g class="message" data-entity-1="part5" data-entity-2="part4" id="msg8"><polygon fill="#181818" points="827.6313,421.5156,817.6313,425.5156,827.6313,429.5156,823.6313,425.5156" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="821.6313" x2="1051.5161" y1="425.5156" y2="425.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96.4146" x="833.6313" y="420.4497">paymentIntent</text></g><g class="message" data-entity-1="part4" data-entity-2="part6" id="msg9"><polygon fill="#181818" points="1210.1558,461.2148,1220.1558,465.2148,1210.1558,469.2148,1214.1558,465.2148" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="816.6313" x2="1216.1558" y1="465.2148" y2="465.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189.0522" x="823.6313" y="460.1489">setStripePaymentIntentId(...)</text></g><path d="M479,438.5156 L479,478.5156 L800,478.5156 L800,448.5156 L790,438.5156 L479,438.5156" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M790,438.5156 L790,448.5156 L800,448.5156 L790,438.5156" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212.2275" x="485" y="455.5825">Updating details of the retrieved</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="300.9995" x="485" y="470.7153">payment intent to reflect successful payment.</text><g class="message" data-entity-1="part4" data-entity-2="part6" id="msg11"><polygon fill="#181818" points="1210.1558,500.9141,1220.1558,504.9141,1210.1558,508.9141,1214.1558,504.9141" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="816.6313" x2="1216.1558" y1="504.9141" y2="504.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152.02" x="823.6313" y="499.8481">setStatus(SUCCEEDED)</text></g><g class="message" data-entity-1="part4" data-entity-2="part6" id="msg12"><polygon fill="#181818" points="1210.1558,530.0469,1220.1558,534.0469,1210.1558,538.0469,1214.1558,534.0469" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="816.6313" x2="1216.1558" y1="534.0469" y2="534.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="237.6436" x="823.6313" y="528.981">setUpdatedAt(LocalDateTime.now())</text></g><g class="message" data-entity-1="part4" data-entity-2="part5" id="msg13"><polygon fill="#181818" points="1035.5161,559.1797,1045.5161,563.1797,1035.5161,567.1797,1039.5161,563.1797" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="816.6313" x2="1041.5161" y1="563.1797" y2="563.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136.9888" x="823.6313" y="558.1138">save(paymentIntent)</text></g><g class="message" data-entity-1="part5" data-entity-2="part14" id="msg14"><polygon fill="#181818" points="2421.7559,588.3125,2431.7559,592.3125,2421.7559,596.3125,2425.7559,592.3125" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1057.5161" x2="2427.7559" y1="592.3125" y2="592.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152.9595" x="1064.5161" y="587.2466">UPDATE paymentIntent</text></g><g class="message" data-entity-1="part14" data-entity-2="part5" id="msg15"><polygon fill="#181818" points="1068.5161,617.4453,1058.5161,621.4453,1068.5161,625.4453,1064.5161,621.4453" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="1062.5161" x2="2437.7559" y1="621.4453" y2="621.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150.0586" x="1074.5161" y="616.3794">updatedPaymentIntent</text></g><g class="message" data-entity-1="part5" data-entity-2="part4" id="msg16"><polygon fill="#181818" points="827.6313,646.5781,817.6313,650.5781,827.6313,654.5781,823.6313,650.5781" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="821.6313" x2="1051.5161" y1="650.5781" y2="650.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134.6846" x="833.6313" y="645.5122">savedPaymentIntent</text></g><g class="message" data-entity-1="part4" data-entity-2="part7" id="msg17"><polygon fill="#181818" points="1364.9448,675.7109,1374.9448,679.7109,1364.9448,683.7109,1368.9448,679.7109" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="816.6313" x2="1370.9448" y1="679.7109" y2="679.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="227.335" x="823.6313" y="674.645">findByReservationId(reservationId)</text></g><g class="message" data-entity-1="part7" data-entity-2="part14" id="msg18"><polygon fill="#181818" points="2421.7559,704.8438,2431.7559,708.8438,2421.7559,712.8438,2425.7559,708.8438" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1386.9448" x2="2427.7559" y1="708.8438" y2="708.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="373.2168" x="1393.9448" y="703.7778">SELECT reservation where reservation_id = reservationId</text></g><g class="message" data-entity-1="part14" data-entity-2="part7" id="msg19"><polygon fill="#181818" points="1397.9448,733.9766,1387.9448,737.9766,1397.9448,741.9766,1393.9448,737.9766" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="1391.9448" x2="2437.7559" y1="737.9766" y2="737.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74.02" x="1403.9448" y="732.9106">reservation</text></g><g class="message" data-entity-1="part7" data-entity-2="part4" id="msg20"><polygon fill="#181818" points="827.6313,763.1094,817.6313,767.1094,827.6313,771.1094,823.6313,767.1094" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="821.6313" x2="1380.9448" y1="767.1094" y2="767.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74.02" x="833.6313" y="762.0435">reservation</text></g><g class="message" data-entity-1="part4" data-entity-2="part8" id="msg21"><polygon fill="#181818" points="1519.8833,810.375,1529.8833,814.375,1519.8833,818.375,1523.8833,814.375" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="816.6313" x2="1525.8833" y1="814.375" y2="814.375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150.2554" x="823.6313" y="809.3091">setStatus(CONFIRMED)</text></g><path d="M529,780.1094 L529,835.1094 L801,835.1094 L801,790.1094 L791,780.1094 L529,780.1094" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M791,780.1094 L791,790.1094 L801,790.1094 L791,780.1094" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194.2446" x="535" y="797.1763">Setting the reservation status</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="196.8027" x="535" y="812.3091">of the retrieved reservation to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="251.5195" x="535" y="827.4419">CONFIRMED after successful payment.</text><g class="message" data-entity-1="part4" data-entity-2="part7" id="msg23"><polygon fill="#181818" points="1364.9448,857.6406,1374.9448,861.6406,1364.9448,865.6406,1368.9448,861.6406" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="816.6313" x2="1370.9448" y1="861.6406" y2="861.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114.5942" x="823.6313" y="856.5747">save(reservation)</text></g><g class="message" data-entity-1="part7" data-entity-2="part14" id="msg24"><polygon fill="#181818" points="2421.7559,886.7734,2431.7559,890.7734,2421.7559,894.7734,2425.7559,890.7734" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1386.9448" x2="2427.7559" y1="890.7734" y2="890.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="376.689" x="1393.9448" y="885.7075">UPDATE reservation where reservation_id = reservationId</text></g><g class="message" data-entity-1="part14" data-entity-2="part7" id="msg25"><polygon fill="#181818" points="1397.9448,900.7734,1387.9448,904.7734,1397.9448,908.7734,1393.9448,904.7734" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="1391.9448" x2="2437.7559" y1="904.7734" y2="904.7734"/></g><g class="message" data-entity-1="part7" data-entity-2="part4" id="msg26"><polygon fill="#181818" points="827.6313,929.9063,817.6313,933.9063,827.6313,937.9063,823.6313,933.9063" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="821.6313" x2="1380.9448" y1="933.9063" y2="933.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116.3906" x="833.6313" y="928.8403">savedReservation</text></g><g class="message" data-entity-1="part4" data-entity-2="part9" id="msg27"><polygon fill="#181818" points="1644.0029,959.0391,1654.0029,963.0391,1644.0029,967.0391,1648.0029,963.0391" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="816.6313" x2="1650.0029" y1="963.0391" y2="963.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116.0986" x="823.6313" y="957.9731">findById(mediaId)</text></g><g class="message" data-entity-1="part9" data-entity-2="part14" id="msg28"><polygon fill="#181818" points="2421.7559,988.1719,2431.7559,992.1719,2421.7559,996.1719,2425.7559,992.1719" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1666.0029" x2="2427.7559" y1="992.1719" y2="992.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="272.6318" x="1673.0029" y="987.106">SELECT media where media_id = mediaId</text></g><g class="message" data-entity-1="part14" data-entity-2="part9" id="msg29"><polygon fill="#181818" points="1677.0029,1002.1719,1667.0029,1006.1719,1677.0029,1010.1719,1673.0029,1006.1719" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="1671.0029" x2="2437.7559" y1="1006.1719" y2="1006.1719"/></g><g class="message" data-entity-1="part9" data-entity-2="part4" id="msg30"><polygon fill="#181818" points="827.6313,1031.3047,817.6313,1035.3047,827.6313,1039.3047,823.6313,1035.3047" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="821.6313" x2="1660.0029" y1="1035.3047" y2="1035.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40.4917" x="833.6313" y="1030.2388">media</text></g><g class="message" data-entity-1="part4" data-entity-2="part10" id="msg31"><polygon fill="#181818" points="1813.6016,1060.4375,1823.6016,1064.4375,1813.6016,1068.4375,1817.6016,1064.4375" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="816.6313" x2="1819.6016" y1="1064.4375" y2="1064.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205.7339" x="823.6313" y="1059.3716">findByCampaignId(campaignId)</text></g><g class="message" data-entity-1="part10" data-entity-2="part14" id="msg32"><polygon fill="#181818" points="2421.7559,1089.5703,2431.7559,1093.5703,2421.7559,1097.5703,2425.7559,1093.5703" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1835.6016" x2="2427.7559" y1="1093.5703" y2="1093.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="361.6006" x="1842.6016" y="1088.5044">SELECT adCampaign where campaign_id = campaignId</text></g><g class="message" data-entity-1="part14" data-entity-2="part10" id="msg33"><polygon fill="#181818" points="1846.6016,1103.5703,1836.6016,1107.5703,1846.6016,1111.5703,1842.6016,1107.5703" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="1840.6016" x2="2437.7559" y1="1107.5703" y2="1107.5703"/></g><g class="message" data-entity-1="part10" data-entity-2="part4" id="msg34"><polygon fill="#181818" points="827.6313,1132.7031,817.6313,1136.7031,827.6313,1140.7031,823.6313,1136.7031" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="821.6313" x2="1829.6016" y1="1136.7031" y2="1136.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82.2466" x="833.6313" y="1131.6372">adCampaign</text></g><g class="message" data-entity-1="part4" data-entity-2="part11" id="msg35"><polygon fill="#181818" points="1996.8447,1161.8359,2006.8447,1165.8359,1996.8447,1169.8359,2000.8447,1165.8359" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="816.6313" x2="2002.8447" y1="1165.8359" y2="1165.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205.7085" x="823.6313" y="1160.77">findAllByBusinessId(businessId)</text></g><g class="message" data-entity-1="part11" data-entity-2="part14" id="msg36"><polygon fill="#181818" points="2421.7559,1190.9688,2431.7559,1194.9688,2421.7559,1198.9688,2425.7559,1194.9688" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="2018.8447" x2="2427.7559" y1="1194.9688" y2="1194.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="335.4165" x="2025.8447" y="1189.9028">SELECT employees where business_id = businessId</text></g><g class="message" data-entity-1="part14" data-entity-2="part11" id="msg37"><polygon fill="#181818" points="2029.8447,1204.9688,2019.8447,1208.9688,2029.8447,1212.9688,2025.8447,1208.9688" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="2023.8447" x2="2437.7559" y1="1208.9688" y2="1208.9688"/></g><g class="message" data-entity-1="part11" data-entity-2="part4" id="msg38"><polygon fill="#181818" points="827.6313,1234.1016,817.6313,1238.1016,827.6313,1242.1016,823.6313,1238.1016" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="821.6313" x2="2012.8447" y1="1238.1016" y2="1238.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125.7788" x="833.6313" y="1233.0356">mediaOwnerEmails</text></g><path d="M572,1253.1016 L648.624,1253.1016 L648.624,1260.2344 L638.624,1270.2344 L572,1270.2344 L572,1253.1016" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="182.7969" style="stroke:#000000;stroke-width:1.5;" width="2020.0298" x="572" y="1253.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31.624" x="587" y="1266.1685">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="176.8755" x="663.624" y="1265.312">[for each mediaOwnerEmail]</text><g class="message" data-entity-1="part4" data-entity-2="part12" id="msg39"><polygon fill="#181818" points="2168.4224,1287.3672,2178.4224,1291.3672,2168.4224,1295.3672,2172.4224,1291.3672" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="816.6313" x2="2174.4224" y1="1291.3672" y2="1291.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="263.9292" x="823.6313" y="1286.3013">getAllCampaignImageLinks(campaignId)</text></g><g class="message" data-entity-1="part12" data-entity-2="part4" id="msg40"><polygon fill="#181818" points="827.6313,1316.5,817.6313,1320.5,827.6313,1324.5,823.6313,1320.5" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="821.6313" x2="2184.4224" y1="1320.5" y2="1320.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73.8867" x="833.6313" y="1315.4341">imageLinks</text></g><g class="message" data-entity-1="part4" data-entity-2="part13" id="msg41"><polygon fill="#181818" points="2313.0869,1356.1992,2323.0869,1360.1992,2313.0869,1364.1992,2317.0869,1360.1992" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="816.6313" x2="2319.0869" y1="1360.1992" y2="1360.1992"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="330.4146" x="823.6313" y="1355.1333">sendSimpleEmail(ownerEmail, subject, emailBody)</text></g><path d="M582,1333.5 L582,1373.5 L801,1373.5 L801,1343.5 L791,1333.5 L582,1333.5" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M791,1333.5 L791,1343.5 L801,1343.5 L791,1333.5" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="198.5864" x="588" y="1350.5669">Email body includes campaign</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154.5527" x="588" y="1365.6997">details and image links.</text><g class="message" data-entity-1="part13" data-entity-2="part15" id="msg43"><polygon fill="#181818" points="2520.4023,1395.8984,2530.4023,1399.8984,2520.4023,1403.8984,2524.4023,1399.8984" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="2335.0869" x2="2526.4023" y1="1399.8984" y2="1399.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72.9409" x="2342.0869" y="1394.8325">Send Email</text></g><g class="message" data-entity-1="part15" data-entity-2="part13" id="msg44"><polygon fill="#181818" points="2346.0869,1409.8984,2336.0869,1413.8984,2346.0869,1417.8984,2342.0869,1413.8984" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="2340.0869" x2="2536.4023" y1="1413.8984" y2="1413.8984"/></g><g class="message" data-entity-1="part13" data-entity-2="part4" id="msg45"><polygon fill="#181818" points="827.6313,1423.8984,817.6313,1427.8984,827.6313,1431.8984,823.6313,1427.8984" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="821.6313" x2="2329.0869" y1="1427.8984" y2="1427.8984"/></g><g class="message" data-entity-1="part4" data-entity-2="part2" id="msg46"><polygon fill="#181818" points="326.2227,1460.0313,316.2227,1464.0313,326.2227,1468.0313,322.2227,1464.0313" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="320.2227" x2="810.6313" y1="1464.0313" y2="1464.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="27.5107" x="332.2227" y="1458.9653">void</text></g><g class="message" data-entity-1="part2" data-entity-2="part1" id="msg47"><polygon fill="#181818" points="56.6147,1496.1641,46.6147,1500.1641,56.6147,1504.1641,52.6147,1500.1641" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="50.6147" x2="309.2227" y1="1500.1641" y2="1500.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85.3315" x="62.6147" y="1495.0981">HTTP 200 OK</text></g><?plantuml-src jLTBR-Cs4BxhLn3RWsrWLzxsQAG1_6hNQD8OiOEzB50mqjXc8ujUaNBgVzyXAL4a9IjjYlfWYAEPRnxyPaHA9ZCWD-Nj0WJRv-GEpf2H3Nml8K-0B1ZT5_HuCovll-LVQ9wYylm0oGil9Me9mNXEvlnuoa12IePVuVd0-SieYcWYUK4-tDp0NnAAd6QtYB2H1Ji1cQvN7mWLn2nn5KKdMaYMi1FDfJ9AU2uBhcrU3UJSI38elkMJhw5CmpNB4AwKB6Foui0XICAFiT0Hn3d8kC9q0dj2gvx0Z6rbje7Yp190s4s7s82QvrQk1PouO5Wj7T-9NewGorKkyV_HlaBWTVSRZLszKz8G7iLLwXvq2EZ2l15Y0G9JeHBttWlmiKkkSOCtrqDqe7t04EQD48-GCke5T-zBD9wLzOFHT4wF9uhjuI5EEyI6Xuwu7ncmSVW5mCDTjeGQrHNtzKiJRSF9QIZpugo9UHqJZfHb3TpIMLQnDO8eIgcaprI00gcV5SfaKIsqpMBMFID-LLXaSxzTQpMzr2CYikE2VBfrcdr2rW-RBHdJ4nkVVnoRjXpRFXykpyYl2KcgiHKBCxRYf1vR8nK8Grw1EqAYvbdvQqO2Gd7L_6KYDVGG-ohZDFr8r0IbiYm07o4fG8wYneny2gA6isurcacYSGWJFK564S5V49Ef-8GSz6Ik1tCrb-rO7cfF8mrWCxMxfQJLGc4wasH2TYnFPnUJGuMwIeUYVWeWtI6aNZXhXRoOJSXcURUSRuatYSZh0GeWmlT2VYRMZ-y6YQFMYvckg1UlXwkrKWZjlAZS8lOQkxbTATa40vQcLjvanOh5SMngbNF4oc1dyDNlwOGjml8zEfF8T47uZiW346HFmN3ZKgjPnKUOgPhagBFB8954b4c2jTgLMQqKQol8K-snFs1ah1XkdkRpvNAnN8pwb7Mma4xby8udDCD-XYqxulUJlmv7-D7l9PEWPnXwHVxt_7bQBwRRPSTM_HDsb2RwzNyXYKgY7y5ZoY0eYCKniJWVj6eVd0_W2YTAIo6UF_p-o-hnNctKeBEX1nxF59rg_p_GxoKrxmdP8iTsE4dugoAVg0zyDGiL1JE-PqcjptB1Kj3omPNW1-G8yi3JsDXOzaLjOWG7WdhIFBhP-xK8k1AUADJBG1RC70UjcZYEv0-c1exdi8zMhV0TookCQWNdig77F4oqfv9kFpiqwHmy6v1wwfXHqrH6QFDAAHn5dgRabPPrHUWEF-DlJwCtoQ0dXUFh_NjVpOl_SU_VizrwY3o-Vy_jkRNk6smMVU9jjKbpmbLYkmfQGzjMXT7FfYGLP5ynVFns6HoFRW4qScZIO8NvkWVgEkLQXgadzZ78tZk8QwewWg06pR6vAaIDQchH-EWhHyjXko9-26vHcWX2KmysB8vxBp35cMRPx38h1Skn3R4-p_Ong8ztfL1lN45Gd_gg8ghorA2cF8sBllAq_BNBuqVGuip3Qmw5lcs84C2_7wcN6USd_COL19KEeNraprKTHBDEzo2ncfPhHxg7EvQ_Y1RdEdbNVv9hXK3kvySikDNle81tR6yneRc5gMz1dcwOkW9e-P3RrF5sKZx_YGV7ZqHVx6OylJHPj8-ePb_KhUmPDV4aa6HbYaH8NBesCPi31Dv8J4eaKpd5Liaxb0PqT6wHdcCdoVe-YCHKI6OlMr3srbY_gGKL3piSESLkMVj1DBlMPUo13peKl2t478AE3cw9PyxIw1g2jdRlXFQYgYlqPRjTavy-VoOFlqKkbwp1tm00?></g></svg>