<?plantuml 1.2026.2beta3?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="2569px" preserveAspectRatio="none" style="width:3857px;height:2569px;background:#FFFFFF;" version="1.1" viewBox="0 0 3857 2569" width="3857px" zoomAndPan="magnify"><title>&lt;u&gt;Design Level Sequence Diagram&lt;/u&gt;
Publish Ad Campaign (part 2)</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="254.3447" x="1799.0486" y="27.9951">Design Level Sequence Diagram</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="232.668" x="1809.887" y="44.292">Publish Ad Campaign (part 2)</text><g><title>..UI..</title><rect fill="#FFFFFF" height="2202.3203" style="stroke:#181818;stroke-width:1;" width="10" x="235.165" y="212.4219"/></g><g><title>..UI..</title><rect fill="#FFFFFF" height="2173.1875" style="stroke:#181818;stroke-width:1;" width="10" x="399.5522" y="241.5547"/></g><g><title>..UI..</title><rect fill="#FFFFFF" height="275.7266" style="stroke:#181818;stroke-width:1;" width="10" x="769.3008" y="2109.8828"/></g><g><title>..UI..</title><rect fill="#FFFFFF" height="157.3633" style="stroke:#181818;stroke-width:1;" width="10" x="963.6489" y="2228.2461"/></g><g><title>..control..</title><rect fill="#FFFFFF" height="1746.5313" style="stroke:#181818;stroke-width:1;" width="10" x="1126.1792" y="285.8203"/></g><g><title>..control..</title><rect fill="#FFFFFF" height="1662.5664" style="stroke:#181818;stroke-width:1;" width="10" x="1780.6519" y="314.9531"/></g><g><title>..repository..</title><rect fill="#FFFFFF" height="87.3984" style="stroke:#181818;stroke-width:1;" width="10" x="2350.3369" y="344.0859"/></g><g><title>..utility..</title><rect fill="#FFFFFF" height="63.832" style="stroke:#181818;stroke-width:1;" width="10" x="2487.4854" y="597.5195"/></g><g><title>..repository..</title><rect fill="#FFFFFF" height="87.3984" style="stroke:#181818;stroke-width:1;" width="10" x="2600.8721" y="763.5547"/></g><g><title>..repository..</title><rect fill="#FFFFFF" height="90.3984" style="stroke:#181818;stroke-width:1;" width="10" x="2774.832" y="1534.2891"/></g><g><title>..repository..</title><rect fill="#FFFFFF" height="90.3984" style="stroke:#181818;stroke-width:1;" width="10" x="2979.4614" y="1285.4219"/></g><g><title>..repository..</title><rect fill="#FFFFFF" height="75.2656" style="stroke:#181818;stroke-width:1;" width="10" x="2979.4614" y="1847.4219"/></g><g><title>..database..</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="3477.7246" y="373.2188"/></g><g><title>..database..</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="3477.7246" y="792.6875"/></g><g><title>..database..</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="3477.7246" y="1317.5547"/></g><g><title>..database..</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="3477.7246" y="1566.4219"/></g><g><title>..database..</title><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1;" width="10" x="3477.7246" y="1879.5547"/></g><g><title>..external..</title><rect fill="#FFFFFF" height="32.1328" style="stroke:#181818;stroke-width:1;" width="10" x="3576.3584" y="1783.1563"/></g><g><title>..external..</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="3576.3584" y="2327.3438"/></g><rect fill="none" height="2011.2578" style="stroke:#000000;stroke-width:1.5;" width="3675.9731" x="10" y="446.4844"/><rect fill="none" height="1827.6563" style="stroke:#000000;stroke-width:1.5;" width="3655.9731" x="20" y="623.0859"/><rect fill="none" height="1577.7891" style="stroke:#000000;stroke-width:1.5;" width="3635.9731" x="30" y="865.9531"/><rect fill="none" height="1336.9219" style="stroke:#000000;stroke-width:1.5;" width="3615.9731" x="40" y="1099.8203"/><rect fill="none" height="1038.9219" style="stroke:#000000;stroke-width:1.5;" width="3595.9731" x="50" y="1390.8203"/><rect fill="none" height="783.0547" style="stroke:#000000;stroke-width:1.5;" width="3575.9731" x="60" y="1639.6875"/><g class="participant-lifeline" data-entity-uid="part1" data-qualified-name="Advertiser" id="part1-lifeline"><g><title>Advertiser</title><rect fill="#000000" fill-opacity="0.00000" height="2337.5547" width="8" x="105.0801" y="137.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="109" x2="109" y1="137.1875" y2="2474.7422"/></g></g><g class="participant-lifeline" data-entity-uid="part2" data-qualified-name="AdvertisementsPage" id="part2-lifeline"><g><title>..UI..</title><rect fill="#000000" fill-opacity="0.00000" height="2337.5547" width="8" x="236.165" y="137.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="239.5234" x2="239.5234" y1="137.1875" y2="2474.7422"/></g></g><g class="participant-lifeline" data-entity-uid="part3" data-qualified-name="PaymentModal" id="part3-lifeline"><g><title>..UI..</title><rect fill="#000000" fill-opacity="0.00000" height="2337.5547" width="8" x="400.5522" y="137.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="403.5923" x2="403.5923" y1="137.1875" y2="2474.7422"/></g></g><g class="participant-lifeline" data-entity-uid="part4" data-qualified-name="EmbeddedCheckoutProvider" id="part4-lifeline"><g><title>..UI..</title><rect fill="#000000" fill-opacity="0.00000" height="2337.5547" width="8" x="770.3008" y="137.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="773.5781" x2="773.5781" y1="137.1875" y2="2474.7422"/></g></g><g class="participant-lifeline" data-entity-uid="part5" data-qualified-name="EmbeddedCheckout" id="part5-lifeline"><g><title>..UI..</title><rect fill="#000000" fill-opacity="0.00000" height="2337.5547" width="8" x="964.6489" y="137.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="968.0234" x2="968.0234" y1="137.1875" y2="2474.7422"/></g></g><g class="participant-lifeline" data-entity-uid="part6" data-qualified-name="PaymentController" id="part6-lifeline"><g><title>..control..</title><rect fill="#000000" fill-opacity="0.00000" height="2337.5547" width="8" x="1127.1792" y="137.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1130.2744" x2="1130.2744" y1="137.1875" y2="2474.7422"/></g></g><g class="participant-lifeline" data-entity-uid="part7" data-qualified-name="StripeService" id="part7-lifeline"><g><title>..control..</title><rect fill="#000000" fill-opacity="0.00000" height="2337.5547" width="8" x="1781.6519" y="137.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1784.6621" x2="1784.6621" y1="137.1875" y2="2474.7422"/></g></g><g class="participant-lifeline" data-entity-uid="part8" data-qualified-name="CampaignRepo" id="part8-lifeline"><g><title>..repository..</title><rect fill="#000000" fill-opacity="0.00000" height="2337.5547" width="8" x="2351.3369" y="137.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="2354.6567" x2="2354.6567" y1="137.1875" y2="2474.7422"/></g></g><g class="participant-lifeline" data-entity-uid="part9" data-qualified-name="JwtUtils" id="part9-lifeline"><g><title>..utility..</title><rect fill="#000000" fill-opacity="0.00000" height="2337.5547" width="8" x="2488.4854" y="137.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="2492.0171" x2="2492.0171" y1="137.1875" y2="2474.7422"/></g></g><g class="participant-lifeline" data-entity-uid="part10" data-qualified-name="MediaRepo" id="part10-lifeline"><g><title>..repository..</title><rect fill="#000000" fill-opacity="0.00000" height="2337.5547" width="8" x="2601.8721" y="137.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="2604.9536" x2="2604.9536" y1="137.1875" y2="2474.7422"/></g></g><g class="participant-lifeline" data-entity-uid="part11" data-qualified-name="StripeAccountRepo" id="part11-lifeline"><g><title>..repository..</title><rect fill="#000000" fill-opacity="0.00000" height="2337.5547" width="8" x="2775.832" y="137.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="2779.7905" x2="2779.7905" y1="137.1875" y2="2474.7422"/></g></g><g class="participant-lifeline" data-entity-uid="part12" data-qualified-name="PaymentIntentRepo" id="part12-lifeline"><g><title>..repository..</title><rect fill="#000000" fill-opacity="0.00000" height="2337.5547" width="8" x="2980.4614" y="137.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="2983.8735" x2="2983.8735" y1="137.1875" y2="2474.7422"/></g></g><g class="participant-lifeline" data-entity-uid="part13" data-qualified-name="DB" id="part13-lifeline"><g><title>..database..</title><rect fill="#000000" fill-opacity="0.00000" height="2337.5547" width="8" x="3478.7246" y="137.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="3482.7056" x2="3482.7056" y1="137.1875" y2="2474.7422"/></g></g><g class="participant-lifeline" data-entity-uid="part14" data-qualified-name="StripeAPI" id="part14-lifeline"><g><title>..external..</title><rect fill="#000000" fill-opacity="0.00000" height="2337.5547" width="8" x="3577.3584" y="137.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="3580.7437" x2="3580.7437" y1="137.1875" y2="2474.7422"/></g></g><g class="participant-lifeline" data-entity-uid="part15" data-qualified-name="MediaOwner" id="part15-lifeline"><g><title>Media Owner</title><rect fill="#000000" fill-opacity="0.00000" height="2337.5547" width="8" x="3681.0781" y="137.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="3684.9731" x2="3684.9731" y1="137.1875" y2="2474.7422"/></g></g><g class="participant participant-head" data-entity-uid="part1" data-qualified-name="Advertiser" id="part1-head"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72.1602" x="70" y="133.8857">Advertiser</text><ellipse cx="109.0801" cy="69.3906" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M109.0801,77.3906 L109.0801,104.3906 M96.0801,85.3906 L122.0801,85.3906 M109.0801,104.3906 L96.0801,119.3906 M109.0801,104.3906 L122.0801,119.3906" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-entity-uid="part1" data-qualified-name="Advertiser" id="part1-tail"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72.1602" x="70" y="2486.7373">Advertiser</text><ellipse cx="109.0801" cy="2498.5391" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M109.0801,2506.5391 L109.0801,2533.5391 M96.0801,2514.5391 L122.0801,2514.5391 M109.0801,2533.5391 L96.0801,2548.5391 M109.0801,2533.5391 L122.0801,2548.5391" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-entity-uid="part2" data-qualified-name="AdvertisementsPage" id="part2-head"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="163.2832" x="158.5234" y="89.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.5068" x="224.4116" y="109.5889">&#171;UI&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149.2832" x="165.5234" y="125.8857">Advertisements Page</text></g><g class="participant participant-tail" data-entity-uid="part2" data-qualified-name="AdvertisementsPage" id="part2-tail"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="163.2832" x="158.5234" y="2473.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.5068" x="224.4116" y="2493.7373">&#171;UI&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149.2832" x="165.5234" y="2510.0342">Advertisements Page</text></g><g class="participant participant-head" data-entity-uid="part3" data-qualified-name="PaymentModal" id="part3-head"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117.9199" x="345.5923" y="89.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.5068" x="388.7988" y="109.5889">&#171;UI&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103.9199" x="352.5923" y="125.8857">PaymentModal</text></g><g class="participant participant-tail" data-entity-uid="part3" data-qualified-name="PaymentModal" id="part3-tail"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117.9199" x="345.5923" y="2473.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.5068" x="388.7988" y="2493.7373">&#171;UI&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103.9199" x="352.5923" y="2510.0342">PaymentModal</text></g><g class="participant participant-head" data-entity-uid="part4" data-qualified-name="EmbeddedCheckoutProvider" id="part4-head"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="213.4453" x="667.5781" y="89.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.5068" x="758.5474" y="109.5889">&#171;UI&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="199.4453" x="674.5781" y="125.8857">EmbeddedCheckoutProvider</text></g><g class="participant participant-tail" data-entity-uid="part4" data-qualified-name="EmbeddedCheckoutProvider" id="part4-tail"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="213.4453" x="667.5781" y="2473.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.5068" x="758.5474" y="2493.7373">&#171;UI&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="199.4453" x="674.5781" y="2510.0342">EmbeddedCheckoutProvider</text></g><g class="participant participant-head" data-entity-uid="part5" data-qualified-name="EmbeddedCheckout" id="part5-head"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="155.251" x="891.0234" y="89.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.5068" x="952.8955" y="109.5889">&#171;UI&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141.251" x="898.0234" y="125.8857">EmbeddedCheckout</text></g><g class="participant participant-tail" data-entity-uid="part5" data-qualified-name="EmbeddedCheckout" id="part5-tail"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="155.251" x="891.0234" y="2473.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.5068" x="952.8955" y="2493.7373">&#171;UI&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141.251" x="898.0234" y="2510.0342">EmbeddedCheckout</text></g><g class="participant participant-head" data-entity-uid="part6" data-qualified-name="PaymentController" id="part6-head"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="149.8096" x="1056.2744" y="73.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65.9668" x="1098.1958" y="93.292">&#171;control&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131.5371" x="1065.4106" y="109.5889">paymentController</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135.8096" x="1063.2744" y="125.8857">:PaymentController</text></g><g class="participant participant-tail" data-entity-uid="part6" data-qualified-name="PaymentController" id="part6-tail"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="149.8096" x="1056.2744" y="2473.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65.9668" x="1098.1958" y="2493.7373">&#171;control&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131.5371" x="1065.4106" y="2510.0342">paymentController</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135.8096" x="1063.2744" y="2526.3311">:PaymentController</text></g><g class="participant participant-head" data-entity-uid="part7" data-qualified-name="StripeService" id="part7-head"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="111.9795" x="1729.6621" y="73.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65.9668" x="1752.6685" y="93.292">&#171;control&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91.6699" x="1739.8169" y="109.5889">stripeService</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97.9795" x="1736.6621" y="125.8857">:StripeService</text></g><g class="participant participant-tail" data-entity-uid="part7" data-qualified-name="StripeService" id="part7-tail"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="111.9795" x="1729.6621" y="2473.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65.9668" x="1752.6685" y="2493.7373">&#171;control&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91.6699" x="1739.8169" y="2510.0342">stripeService</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97.9795" x="1736.6621" y="2526.3311">:StripeService</text></g><g class="participant participant-head" data-entity-uid="part8" data-qualified-name="CampaignRepo" id="part8-head"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="183.3604" x="2263.6567" y="73.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.2314" x="2311.2212" y="93.292">&#171;repository&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163.6455" x="2273.5142" y="109.5889">adCampaignRepository</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="169.3604" x="2270.6567" y="125.8857">:AdCampaignRepository</text></g><g class="participant participant-tail" data-entity-uid="part8" data-qualified-name="CampaignRepo" id="part8-tail"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="183.3604" x="2263.6567" y="2473.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.2314" x="2311.2212" y="2493.7373">&#171;repository&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163.6455" x="2273.5142" y="2510.0342">adCampaignRepository</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="169.3604" x="2270.6567" y="2526.3311">:AdCampaignRepository</text></g><g class="participant participant-head" data-entity-uid="part9" data-qualified-name="JwtUtils" id="part9-head"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="70.9365" x="2457.0171" y="73.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.9365" x="2464.0171" y="93.292">&#171;utility&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51.6387" x="2466.666" y="109.5889">jwtUtils</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.5947" x="2464.188" y="125.8857">:JwtUtils</text></g><g class="participant participant-tail" data-entity-uid="part9" data-qualified-name="JwtUtils" id="part9-tail"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="70.9365" x="2457.0171" y="2473.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.9365" x="2464.0171" y="2493.7373">&#171;utility&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51.6387" x="2466.666" y="2510.0342">jwtUtils</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.5947" x="2464.188" y="2526.3311">:JwtUtils</text></g><g class="participant participant-head" data-entity-uid="part10" data-qualified-name="MediaRepo" id="part10-head"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="135.8369" x="2537.9536" y="73.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.2314" x="2561.7563" y="93.292">&#171;repository&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118.6787" x="2546.5327" y="109.5889">mediaRepository</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121.8369" x="2544.9536" y="125.8857">:MediaRepository</text></g><g class="participant participant-tail" data-entity-uid="part10" data-qualified-name="MediaRepo" id="part10-tail"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="135.8369" x="2537.9536" y="2473.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.2314" x="2561.7563" y="2493.7373">&#171;repository&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118.6787" x="2546.5327" y="2510.0342">mediaRepository</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121.8369" x="2544.9536" y="2526.3311">:MediaRepository</text></g><g class="participant participant-head" data-entity-uid="part11" data-qualified-name="StripeAccountRepo" id="part11-head"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="192.083" x="2683.7905" y="73.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.2314" x="2735.7163" y="93.292">&#171;repository&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="171.7734" x="2693.9453" y="109.5889">stripeAccountRepository</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="178.083" x="2690.7905" y="125.8857">:StripeAccountRepository</text></g><g class="participant participant-tail" data-entity-uid="part11" data-qualified-name="StripeAccountRepo" id="part11-tail"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="192.083" x="2683.7905" y="2473.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.2314" x="2735.7163" y="2493.7373">&#171;repository&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="171.7734" x="2693.9453" y="2510.0342">stripeAccountRepository</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="178.083" x="2690.7905" y="2526.3311">:StripeAccountRepository</text></g><g class="participant participant-head" data-entity-uid="part12" data-qualified-name="PaymentIntentRepo" id="part12-head"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="197.1758" x="2885.8735" y="73.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.2314" x="2940.3457" y="93.292">&#171;repository&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="178.9033" x="2895.0098" y="109.5889">paymentIntentRepository</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="183.1758" x="2892.8735" y="125.8857">:PaymentIntentRepository</text></g><g class="participant participant-tail" data-entity-uid="part12" data-qualified-name="PaymentIntentRepo" id="part12-tail"><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="197.1758" x="2885.8735" y="2473.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.2314" x="2940.3457" y="2493.7373">&#171;repository&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="178.9033" x="2895.0098" y="2510.0342">paymentIntentRepository</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="183.1758" x="2892.8735" y="2526.3311">:PaymentIntentRepository</text></g><g class="participant participant-head" data-entity-uid="part13" data-qualified-name="DB" id="part13-head"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82.0381" x="3438.7056" y="117.5889">&#171;database&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71.5176" x="3443.9658" y="133.8857">:Database</text><path d="M3464.7246,68.5938 C3464.7246,58.5938 3482.7246,58.5938 3482.7246,58.5938 C3482.7246,58.5938 3500.7246,58.5938 3500.7246,68.5938 L3500.7246,94.5938 C3500.7246,104.5938 3482.7246,104.5938 3482.7246,104.5938 C3482.7246,104.5938 3464.7246,104.5938 3464.7246,94.5938 L3464.7246,68.5938" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M3464.7246,68.5938 C3464.7246,78.5938 3482.7246,78.5938 3482.7246,78.5938 C3482.7246,78.5938 3500.7246,78.5938 3500.7246,68.5938" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-entity-uid="part13" data-qualified-name="DB" id="part13-tail"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82.0381" x="3438.7056" y="2486.7373">&#171;database&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71.5176" x="3443.9658" y="2503.0342">:Database</text><path d="M3464.7246,2516.3359 C3464.7246,2506.3359 3482.7246,2506.3359 3482.7246,2506.3359 C3482.7246,2506.3359 3500.7246,2506.3359 3500.7246,2516.3359 L3500.7246,2542.3359 C3500.7246,2552.3359 3482.7246,2552.3359 3482.7246,2552.3359 C3482.7246,2552.3359 3464.7246,2552.3359 3464.7246,2542.3359 L3464.7246,2516.3359" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M3464.7246,2516.3359 C3464.7246,2526.3359 3482.7246,2526.3359 3482.7246,2526.3359 C3482.7246,2526.3359 3500.7246,2526.3359 3500.7246,2516.3359" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-entity-uid="part14" data-qualified-name="StripeAPI" id="part14-head"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="89.2295" x="3536.7437" y="89.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75.2295" x="3543.7437" y="109.5889">&#171;external&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68.1201" x="3547.2983" y="125.8857">Stripe API</text></g><g class="participant participant-tail" data-entity-uid="part14" data-qualified-name="StripeAPI" id="part14-tail"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="89.2295" x="3536.7437" y="2473.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75.2295" x="3543.7437" y="2493.7373">&#171;external&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68.1201" x="3547.2983" y="2510.0342">Stripe API</text></g><g class="participant participant-head" data-entity-uid="part15" data-qualified-name="MediaOwner" id="part15-head"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92.21" x="3635.9731" y="133.8857">Media Owner</text><ellipse cx="3685.0781" cy="69.3906" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M3685.0781,77.3906 L3685.0781,104.3906 M3672.0781,85.3906 L3698.0781,85.3906 M3685.0781,104.3906 L3672.0781,119.3906 M3685.0781,104.3906 L3698.0781,119.3906" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-entity-uid="part15" data-qualified-name="MediaOwner" id="part15-tail"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92.21" x="3635.9731" y="2486.7373">Media Owner</text><ellipse cx="3685.0781" cy="2498.5391" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M3685.0781,2506.5391 L3685.0781,2533.5391 M3672.0781,2514.5391 L3698.0781,2514.5391 M3685.0781,2533.5391 L3672.0781,2548.5391 M3685.0781,2533.5391 L3698.0781,2548.5391" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g><title>..UI..</title><rect fill="#FFFFFF" height="2202.3203" style="stroke:#181818;stroke-width:1;" width="10" x="235.165" y="212.4219"/></g><g><title>..UI..</title><rect fill="#FFFFFF" height="2173.1875" style="stroke:#181818;stroke-width:1;" width="10" x="399.5522" y="241.5547"/></g><g><title>..UI..</title><rect fill="#FFFFFF" height="275.7266" style="stroke:#181818;stroke-width:1;" width="10" x="769.3008" y="2109.8828"/></g><g><title>..UI..</title><rect fill="#FFFFFF" height="157.3633" style="stroke:#181818;stroke-width:1;" width="10" x="963.6489" y="2228.2461"/></g><g><title>..control..</title><rect fill="#FFFFFF" height="1746.5313" style="stroke:#181818;stroke-width:1;" width="10" x="1126.1792" y="285.8203"/></g><g><title>..control..</title><rect fill="#FFFFFF" height="1662.5664" style="stroke:#181818;stroke-width:1;" width="10" x="1780.6519" y="314.9531"/></g><g><title>..repository..</title><rect fill="#FFFFFF" height="87.3984" style="stroke:#181818;stroke-width:1;" width="10" x="2350.3369" y="344.0859"/></g><g><title>..utility..</title><rect fill="#FFFFFF" height="63.832" style="stroke:#181818;stroke-width:1;" width="10" x="2487.4854" y="597.5195"/></g><g><title>..repository..</title><rect fill="#FFFFFF" height="87.3984" style="stroke:#181818;stroke-width:1;" width="10" x="2600.8721" y="763.5547"/></g><g><title>..repository..</title><rect fill="#FFFFFF" height="90.3984" style="stroke:#181818;stroke-width:1;" width="10" x="2774.832" y="1534.2891"/></g><g><title>..repository..</title><rect fill="#FFFFFF" height="90.3984" style="stroke:#181818;stroke-width:1;" width="10" x="2979.4614" y="1285.4219"/></g><g><title>..repository..</title><rect fill="#FFFFFF" height="75.2656" style="stroke:#181818;stroke-width:1;" width="10" x="2979.4614" y="1847.4219"/></g><g><title>..database..</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="3477.7246" y="373.2188"/></g><g><title>..database..</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="3477.7246" y="792.6875"/></g><g><title>..database..</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="3477.7246" y="1317.5547"/></g><g><title>..database..</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="3477.7246" y="1566.4219"/></g><g><title>..database..</title><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1;" width="10" x="3477.7246" y="1879.5547"/></g><g><title>..external..</title><rect fill="#FFFFFF" height="32.1328" style="stroke:#181818;stroke-width:1;" width="10" x="3576.3584" y="1783.1563"/></g><g><title>..external..</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="3576.3584" y="2327.3438"/></g><rect fill="none" height="39.1016" style="stroke:#000000;stroke-width:1.5;" width="218.4688" x="3632.9731" y="147.1875"/><path d="M3632.9731,147.1875 L3697.9731,147.1875 L3697.9731,154.1875 L3687.9731,164.1875 L3632.9731,164.1875 L3632.9731,147.1875" fill="#EEEEEE" style="stroke:#000000;stroke-width:2;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="20.8838" x="3645.9731" y="161.2544">ref</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="210.4688" x="3636.9731" y="179.3262">UC- Approve Reservation Use Case</text><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg1"><polygon fill="#181818" points="223.165,208.4219,233.165,212.4219,223.165,216.4219,227.165,212.4219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="109.0801" x2="229.165" y1="212.4219" y2="212.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107.085" x="116.0801" y="207.356">Initiate Payment</text></g><g class="message" data-entity-1="part2" data-entity-2="part3" id="msg2"><polygon fill="#181818" points="387.5522,237.5547,397.5522,241.5547,387.5522,245.5547,391.5522,241.5547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="245.165" x2="393.5522" y1="241.5547" y2="241.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106.6406" x="252.165" y="236.4888">PaymentModal()</text></g><g class="message" data-entity-1="part3" data-entity-2="part6" id="msg3"><polygon fill="#181818" points="1114.1792,281.8203,1124.1792,285.8203,1114.1792,289.8203,1118.1792,285.8203" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="409.5522" x2="1120.1792" y1="285.8203" y2="285.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="303.5195" x="416.5522" y="265.6216">POST /api/v1/payments/create-payment-intent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="527.4141" x="416.5522" y="280.7544">createCheckoutSession(reservationId, mediaId, campaignId, startDate, endDate)</text></g><g class="message" data-entity-1="part6" data-entity-2="part7" id="msg4"><polygon fill="#181818" points="1768.6519,310.9531,1778.6519,314.9531,1768.6519,318.9531,1772.6519,314.9531" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1136.1792" x2="1774.6519" y1="314.9531" y2="314.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="625.4727" x="1143.1792" y="309.8872">createAuthorizedCheckoutSession(jwt, campaignId, mediaId, reservationId, startDate, endDate)</text></g><g class="message" data-entity-1="part7" data-entity-2="part8" id="msg5"><polygon fill="#181818" points="2338.3369,340.0859,2348.3369,344.0859,2338.3369,348.0859,2342.3369,344.0859" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1790.6519" x2="2344.3369" y1="344.0859" y2="344.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205.7339" x="1797.6519" y="339.02">findByCampaignId(campaignId)</text></g><g class="message" data-entity-1="part8" data-entity-2="part13" id="msg6"><polygon fill="#181818" points="3465.7246,369.2188,3475.7246,373.2188,3465.7246,377.2188,3469.7246,373.2188" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="2360.3369" x2="3471.7246" y1="373.2188" y2="373.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="433.5449" x="2367.3369" y="368.1528">SELECT * FROM ad_campaigns WHERE campaign_id = campaignId</text></g><g class="message" data-entity-1="part13" data-entity-2="part8" id="msg7"><polygon fill="#181818" points="2371.3369,398.3516,2361.3369,402.3516,2371.3369,406.3516,2367.3369,402.3516" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="2365.3369" x2="3481.7246" y1="402.3516" y2="402.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97.5127" x="2377.3369" y="397.2856">campaign data</text></g><g class="message" data-entity-1="part8" data-entity-2="part7" id="msg8"><polygon fill="#181818" points="1801.6519,427.4844,1791.6519,431.4844,1801.6519,435.4844,1797.6519,431.4844" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="1795.6519" x2="2354.3369" y1="431.4844" y2="431.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.6392" x="1807.6519" y="426.4185">campaign: Campaign</text></g><path d="M10,446.4844 L74.4429,446.4844 L74.4429,453.6172 L64.4429,463.6172 L10,463.6172 L10,446.4844" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="2011.2578" style="stroke:#000000;stroke-width:1.5;" width="3675.9731" x="10" y="446.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="25" y="459.5513">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="134.417" x="89.4429" y="458.6948">[campaign not found]</text><g class="message" data-entity-1="part7" data-entity-2="part6" id="msg9"><polygon fill="#181818" points="1147.1792,480.75,1137.1792,484.75,1147.1792,488.75,1143.1792,484.75" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1141.1792" x2="1779.6519" y1="484.75" y2="484.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="292.8618" x="1153.1792" y="479.6841">throw new AdCampaignNotFoundException()</text></g><g class="message" data-entity-1="part6" data-entity-2="part3" id="msg10"><polygon fill="#181818" points="420.5522,509.8828,410.5522,513.8828,420.5522,517.8828,416.5522,513.8828" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="414.5522" x2="1125.1792" y1="513.8828" y2="513.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133.6436" x="426.5522" y="508.8169">HTTP 404 Not Found</text></g><g class="message" data-entity-1="part3" data-entity-2="part2" id="msg11"><polygon fill="#181818" points="256.165,539.0156,246.165,543.0156,256.165,547.0156,252.165,543.0156" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="250.165" x2="398.5522" y1="543.0156" y2="543.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32.2017" x="262.165" y="537.9497">Error</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="10" x2="3685.9731" y1="552.0156" y2="552.0156"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="109.9409" x="15" y="562.2261">[campaign found]</text><g class="message" data-entity-1="part7" data-entity-2="part9" id="msg12"><polygon fill="#181818" points="2475.4854,593.5195,2485.4854,597.5195,2475.4854,601.5195,2479.4854,597.5195" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1790.6519" x2="2481.4854" y1="597.5195" y2="597.5195"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="402.1938" x="1797.6519" y="592.4536">validateUserIsEmployeeOfBusiness(jwt, advertiserBusinessId)</text></g><path d="M1525,570.8203 L1525,610.8203 L1775,610.8203 L1775,580.8203 L1765,570.8203 L1525,570.8203" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1765,570.8203 L1765,580.8203 L1775,580.8203 L1765,570.8203" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="229.2075" x="1531" y="587.8872">Validating whether the advertiser's</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212.4878" x="1531" y="603.02">organization owns the campaign</text><path d="M20,623.0859 L84.4429,623.0859 L84.4429,630.2188 L74.4429,640.2188 L20,640.2188 L20,623.0859" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="1827.6563" style="stroke:#000000;stroke-width:1.5;" width="3655.9731" x="20" y="623.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="35" y="636.1528">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="102.0293" x="99.4429" y="635.2964">[validation fails]</text><g class="message" data-entity-1="part9" data-entity-2="part6" id="msg14"><polygon fill="#181818" points="1147.1792,657.3516,1137.1792,661.3516,1147.1792,665.3516,1143.1792,661.3516" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="1141.1792" x2="2491.4854" y1="661.3516" y2="661.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="203.2202" x="1153.1792" y="656.2856">throws AccessDeniedException</text></g><g class="message" data-entity-1="part6" data-entity-2="part3" id="msg15"><polygon fill="#181818" points="420.5522,686.4844,410.5522,690.4844,420.5522,694.4844,416.5522,690.4844" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="414.5522" x2="1125.1792" y1="690.4844" y2="690.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153.8545" x="426.5522" y="685.4185">HTTP 401 Unauthorized</text></g><g class="message" data-entity-1="part3" data-entity-2="part2" id="msg16"><polygon fill="#181818" points="256.165,715.6172,246.165,719.6172,256.165,723.6172,252.165,719.6172" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="250.165" x2="398.5522" y1="719.6172" y2="719.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32.2017" x="262.165" y="714.5513">Error</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="20" x2="3675.9731" y1="728.6172" y2="728.6172"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="132.4941" x="25" y="738.8276">[validation succeeds]</text><g class="message" data-entity-1="part7" data-entity-2="part10" id="msg17"><polygon fill="#181818" points="2588.8721,759.5547,2598.8721,763.5547,2588.8721,767.5547,2592.8721,763.5547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1790.6519" x2="2594.8721" y1="763.5547" y2="763.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="232.5845" x="1797.6519" y="758.4888">findById(UUID.fromString(mediaId))</text></g><g class="message" data-entity-1="part10" data-entity-2="part13" id="msg18"><polygon fill="#181818" points="3465.7246,788.6875,3475.7246,792.6875,3465.7246,796.6875,3469.7246,792.6875" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="2610.8721" x2="3471.7246" y1="792.6875" y2="792.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="333.2329" x="2617.8721" y="787.6216">SELECT * FROM media WHERE media_id = mediaId</text></g><g class="message" data-entity-1="part13" data-entity-2="part10" id="msg19"><polygon fill="#181818" points="2621.8721,817.8203,2611.8721,821.8203,2621.8721,825.8203,2617.8721,821.8203" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="2615.8721" x2="3481.7246" y1="821.8203" y2="821.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73.9058" x="2627.8721" y="816.7544">media data</text></g><g class="message" data-entity-1="part10" data-entity-2="part7" id="msg20"><polygon fill="#181818" points="1801.6519,846.9531,1791.6519,850.9531,1801.6519,854.9531,1797.6519,850.9531" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="1795.6519" x2="2604.8721" y1="850.9531" y2="850.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88.0483" x="1807.6519" y="845.8872">media: Media</text></g><path d="M30,865.9531 L94.4429,865.9531 L94.4429,873.0859 L84.4429,883.0859 L30,883.0859 L30,865.9531" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="1577.7891" style="stroke:#000000;stroke-width:1.5;" width="3635.9731" x="30" y="865.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="45" y="879.02">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="112.229" x="109.4429" y="878.1636">[media not found]</text><g class="message" data-entity-1="part7" data-entity-2="part6" id="msg21"><polygon fill="#181818" points="1147.1792,900.2188,1137.1792,904.2188,1147.1792,908.2188,1143.1792,904.2188" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1141.1792" x2="1779.6519" y1="904.2188" y2="904.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="248.7329" x="1153.1792" y="899.1528">throw new MediaNotFoundException()</text></g><g class="message" data-entity-1="part6" data-entity-2="part3" id="msg22"><polygon fill="#181818" points="420.5522,929.3516,410.5522,933.3516,420.5522,937.3516,416.5522,933.3516" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="414.5522" x2="1125.1792" y1="933.3516" y2="933.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133.6436" x="426.5522" y="928.2856">HTTP 404 Not Found</text></g><g class="message" data-entity-1="part3" data-entity-2="part2" id="msg23"><polygon fill="#181818" points="256.165,958.4844,246.165,962.4844,256.165,966.4844,252.165,962.4844" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="250.165" x2="398.5522" y1="962.4844" y2="962.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32.2017" x="262.165" y="957.4185">Error</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="30" x2="3665.9731" y1="971.4844" y2="971.4844"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="87.7529" x="35" y="981.6948">[media found]</text><g class="message" data-entity-1="part7" data-entity-2="part7" id="msg24"><line style="stroke:#181818;stroke-width:1;" x1="1790.6519" x2="1832.6519" y1="1006.4219" y2="1006.4219"/><line style="stroke:#181818;stroke-width:1;" x1="1832.6519" x2="1832.6519" y1="1006.4219" y2="1019.4219"/><line style="stroke:#181818;stroke-width:1;" x1="1791.6519" x2="1832.6519" y1="1019.4219" y2="1019.4219"/><polygon fill="#181818" points="1801.6519,1015.4219,1791.6519,1019.4219,1801.6519,1023.4219,1797.6519,1019.4219" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="378.0283" x="1797.6519" y="1001.356">calculatePriceFromDates(mediaPrice, startDate, endDate)</text></g><path d="M1583,1032.4219 L1583,1087.4219 L1775,1087.4219 L1775,1042.4219 L1765,1032.4219 L1583,1032.4219" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1765,1032.4219 L1765,1042.4219 L1775,1042.4219 L1765,1032.4219" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171.0884" x="1589" y="1049.4888">- Convert amount to cents</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153.8418" x="1589" y="1064.6216">- Calculate platform fee</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169.9141" x="1589" y="1079.7544">- Create Idempotency Key</text><path d="M40,1099.8203 L104.4429,1099.8203 L104.4429,1106.9531 L94.4429,1116.9531 L40,1116.9531 L40,1099.8203" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="1336.9219" style="stroke:#000000;stroke-width:1.5;" width="3615.9731" x="40" y="1099.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="55" y="1112.8872">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="343.9863" x="119.4429" y="1112.0308">[price calculation fails (e.g. endDate before startDate)]</text><g class="message" data-entity-1="part7" data-entity-2="part6" id="msg25"><polygon fill="#181818" points="1147.1792,1134.0859,1137.1792,1138.0859,1147.1792,1142.0859,1143.1792,1138.0859" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1141.1792" x2="1779.6519" y1="1138.0859" y2="1138.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="234.0063" x="1153.1792" y="1133.02">throw new InvalidPricingException()</text></g><g class="message" data-entity-1="part6" data-entity-2="part3" id="msg26"><polygon fill="#181818" points="420.5522,1163.2188,410.5522,1167.2188,420.5522,1171.2188,416.5522,1167.2188" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="414.5522" x2="1125.1792" y1="1167.2188" y2="1167.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149.2334" x="426.5522" y="1162.1528">HTTP 400 Bad Request</text></g><g class="message" data-entity-1="part3" data-entity-2="part2" id="msg27"><polygon fill="#181818" points="256.165,1192.3516,246.165,1196.3516,256.165,1200.3516,252.165,1196.3516" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="250.165" x2="398.5522" y1="1196.3516" y2="1196.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32.2017" x="262.165" y="1191.2856">Error</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="40" x2="3655.9731" y1="1205.3516" y2="1205.3516"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="187.9185" x="45" y="1215.562">[price calculated successfully]</text><g class="message" data-entity-1="part7" data-entity-2="part7" id="msg28"><line style="stroke:#181818;stroke-width:1;" x1="1790.6519" x2="1832.6519" y1="1240.2891" y2="1240.2891"/><line style="stroke:#181818;stroke-width:1;" x1="1832.6519" x2="1832.6519" y1="1240.2891" y2="1253.2891"/><line style="stroke:#181818;stroke-width:1;" x1="1791.6519" x2="1832.6519" y1="1253.2891" y2="1253.2891"/><polygon fill="#181818" points="1801.6519,1249.2891,1791.6519,1253.2891,1801.6519,1257.2891,1797.6519,1253.2891" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="535.6851" x="1797.6519" y="1235.2231">createCheckoutSession(reservationId, calculatedAmount, mediaOwnerBusinessId)</text></g><g class="message" data-entity-1="part7" data-entity-2="part12" id="msg29"><polygon fill="#181818" points="2967.4614,1281.4219,2977.4614,1285.4219,2967.4614,1289.4219,2971.4614,1285.4219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1790.6519" x2="2973.4614" y1="1285.4219" y2="1285.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="227.335" x="1797.6519" y="1280.356">findByReservationId(reservationId)</text></g><path d="M2994,1266.2891 L2994,1291.2891 L3299,1291.2891 L3299,1276.2891 L3289,1266.2891 L2994,1266.2891" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M3289,1266.2891 L3289,1276.2891 L3299,1276.2891 L3289,1266.2891" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="284.1592" x="3000" y="1283.356">Check if a payment has already been made</text><g class="message" data-entity-1="part12" data-entity-2="part13" id="msg31"><polygon fill="#181818" points="3465.7246,1313.5547,3475.7246,1317.5547,3465.7246,1321.5547,3469.7246,1317.5547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="2989.4614" x2="3471.7246" y1="1317.5547" y2="1317.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="469.2632" x="2996.4614" y="1312.4888">SELECT * FROM payment_intents WHERE reservation_id = reservationId</text></g><g class="message" data-entity-1="part13" data-entity-2="part12" id="msg32"><polygon fill="#181818" points="3000.4614,1342.6875,2990.4614,1346.6875,3000.4614,1350.6875,2996.4614,1346.6875" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="2994.4614" x2="3481.7246" y1="1346.6875" y2="1346.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91.3237" x="3006.4614" y="1341.6216">payment data</text></g><g class="message" data-entity-1="part12" data-entity-2="part7" id="msg33"><polygon fill="#181818" points="1801.6519,1371.8203,1791.6519,1375.8203,1801.6519,1379.8203,1797.6519,1375.8203" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="1795.6519" x2="2983.4614" y1="1375.8203" y2="1375.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178.0137" x="1807.6519" y="1370.7544">existingPayment (Optional)</text></g><path d="M50,1390.8203 L114.4429,1390.8203 L114.4429,1397.9531 L104.4429,1407.9531 L50,1407.9531 L50,1390.8203" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="1038.9219" style="stroke:#000000;stroke-width:1.5;" width="3595.9731" x="50" y="1390.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="65" y="1403.8872">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="279.4097" x="129.4429" y="1403.0308">[payment already exists for this reservation]</text><g class="message" data-entity-1="part7" data-entity-2="part6" id="msg34"><polygon fill="#181818" points="1147.1792,1425.0859,1137.1792,1429.0859,1147.1792,1433.0859,1143.1792,1429.0859" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1141.1792" x2="1779.6519" y1="1429.0859" y2="1429.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="266.1826" x="1153.1792" y="1424.02">throw new DuplicatePaymentException()</text></g><g class="message" data-entity-1="part6" data-entity-2="part3" id="msg35"><polygon fill="#181818" points="420.5522,1454.2188,410.5522,1458.2188,420.5522,1462.2188,416.5522,1458.2188" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="414.5522" x2="1125.1792" y1="1458.2188" y2="1458.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115.8892" x="426.5522" y="1453.1528">HTTP 409 Conflict</text></g><g class="message" data-entity-1="part3" data-entity-2="part2" id="msg36"><polygon fill="#181818" points="256.165,1483.3516,246.165,1487.3516,256.165,1491.3516,252.165,1487.3516" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="250.165" x2="398.5522" y1="1487.3516" y2="1487.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32.2017" x="262.165" y="1482.2856">Error</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="50" x2="3645.9731" y1="1496.3516" y2="1496.3516"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="137.1885" x="55" y="1506.562">[no existing payment]</text><g class="message" data-entity-1="part7" data-entity-2="part11" id="msg37"><polygon fill="#181818" points="2762.832,1530.2891,2772.832,1534.2891,2762.832,1538.2891,2766.832,1534.2891" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1790.6519" x2="2768.832" y1="1534.2891" y2="1534.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189.5918" x="1797.6519" y="1529.2231">findByBusinessId(businessId)</text></g><path d="M2789,1515.1563 L2789,1540.1563 L3035,1540.1563 L3035,1525.1563 L3025,1515.1563 L2789,1515.1563" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M3025,1515.1563 L3025,1525.1563 L3035,1525.1563 L3025,1515.1563" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="225.4624" x="2795" y="1532.2231">Find media owner's Stripe account</text><g class="message" data-entity-1="part11" data-entity-2="part13" id="msg39"><polygon fill="#181818" points="3465.7246,1562.4219,3475.7246,1566.4219,3465.7246,1570.4219,3469.7246,1566.4219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="2784.832" x2="3471.7246" y1="1566.4219" y2="1566.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="427.2163" x="2791.832" y="1561.356">SELECT * FROM stripe_accounts WHERE business_id = businessId</text></g><g class="message" data-entity-1="part13" data-entity-2="part11" id="msg40"><polygon fill="#181818" points="2795.832,1591.5547,2785.832,1595.5547,2795.832,1599.5547,2791.832,1595.5547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="2789.832" x2="3481.7246" y1="1595.5547" y2="1595.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123.208" x="2801.832" y="1590.4888">stripeAccount data</text></g><g class="message" data-entity-1="part11" data-entity-2="part7" id="msg41"><polygon fill="#181818" points="1801.6519,1620.6875,1791.6519,1624.6875,1801.6519,1628.6875,1797.6519,1624.6875" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="1795.6519" x2="2778.832" y1="1624.6875" y2="1624.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89.7939" x="1807.6519" y="1619.6216">stripeAccount</text></g><path d="M60,1639.6875 L124.4429,1639.6875 L124.4429,1646.8203 L114.4429,1656.8203 L60,1656.8203 L60,1639.6875" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="783.0547" style="stroke:#000000;stroke-width:1.5;" width="3575.9731" x="60" y="1639.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="75" y="1652.7544">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="327.7979" x="139.4429" y="1651.8979">[stripe onboarding incomplete or account not found]</text><g class="message" data-entity-1="part7" data-entity-2="part6" id="msg42"><polygon fill="#181818" points="1147.1792,1673.9531,1137.1792,1677.9531,1147.1792,1681.9531,1143.1792,1677.9531" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1141.1792" x2="1779.6519" y1="1677.9531" y2="1677.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="334.4453" x="1153.1792" y="1672.8872">throw new StripeOnboardingIncompleteException()</text></g><g class="message" data-entity-1="part6" data-entity-2="part3" id="msg43"><polygon fill="#181818" points="420.5522,1703.0859,410.5522,1707.0859,420.5522,1711.0859,416.5522,1707.0859" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="414.5522" x2="1125.1792" y1="1707.0859" y2="1707.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133.6436" x="426.5522" y="1702.02">HTTP 404 Not Found</text></g><g class="message" data-entity-1="part3" data-entity-2="part2" id="msg44"><polygon fill="#181818" points="256.165,1732.2188,246.165,1736.2188,256.165,1740.2188,252.165,1736.2188" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="250.165" x2="398.5522" y1="1736.2188" y2="1736.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32.2017" x="262.165" y="1731.1528">Error</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="60" x2="3635.9731" y1="1745.2188" y2="1745.2188"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="301.8662" x="65" y="1755.4292">[stripe account found and onboarding complete]</text><g class="message" data-entity-1="part7" data-entity-2="part14" id="msg45"><polygon fill="#181818" points="3564.3584,1779.1563,3574.3584,1783.1563,3564.3584,1787.1563,3568.3584,1783.1563" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1790.6519" x2="3570.3584" y1="1783.1563" y2="1783.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="247.0635" x="1797.6519" y="1778.0903">Session.create(SessionCreateParams)</text></g><path d="M1319,1764.0234 L1319,1789.0234 L1775,1789.0234 L1775,1774.0234 L1765,1764.0234 L1319,1764.0234" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1765,1764.0234 L1765,1774.0234 L1775,1774.0234 L1765,1764.0234" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="435.3984" x="1325" y="1781.0903">Create Stripe checkout session with transfer data and platform fee</text><g class="message" data-entity-1="part14" data-entity-2="part7" id="msg47"><polygon fill="#181818" points="1801.6519,1811.2891,1791.6519,1815.2891,1801.6519,1819.2891,1797.6519,1815.2891" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="1795.6519" x2="3580.3584" y1="1815.2891" y2="1815.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="242.8232" x="1807.6519" y="1810.2231">session: com.stripe.checkout.Session</text></g><g class="message" data-entity-1="part7" data-entity-2="part12" id="msg48"><polygon fill="#181818" points="2967.4614,1843.4219,2977.4614,1847.4219,2967.4614,1851.4219,2971.4614,1847.4219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1790.6519" x2="2973.4614" y1="1847.4219" y2="1847.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136.9888" x="1797.6519" y="1842.356">save(paymentIntent)</text></g><path d="M1361,1828.2891 L1361,1853.2891 L1774,1853.2891 L1774,1838.2891 L1764,1828.2891 L1361,1828.2891" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1764,1828.2891 L1764,1838.2891 L1774,1838.2891 L1764,1828.2891" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="392.8311" x="1367" y="1845.356">Create or update local payment record with PENDING status</text><g class="message" data-entity-1="part12" data-entity-2="part13" id="msg50"><polygon fill="#181818" points="3465.7246,1875.5547,3475.7246,1879.5547,3465.7246,1883.5547,3469.7246,1879.5547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="2989.4614" x2="3471.7246" y1="1879.5547" y2="1879.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210.6152" x="2996.4614" y="1874.4888">INSERT/UPDATE payment_intent</text></g><g class="message" data-entity-1="part13" data-entity-2="part12" id="msg51"><polygon fill="#181818" points="3000.4614,1889.5547,2990.4614,1893.5547,3000.4614,1897.5547,2996.4614,1893.5547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="2994.4614" x2="3481.7246" y1="1893.5547" y2="1893.5547"/></g><g class="message" data-entity-1="part12" data-entity-2="part7" id="msg52"><polygon fill="#181818" points="1801.6519,1918.6875,1791.6519,1922.6875,1801.6519,1926.6875,1797.6519,1922.6875" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="1795.6519" x2="2983.4614" y1="1922.6875" y2="1922.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134.6846" x="1807.6519" y="1917.6216">savedPaymentIntent</text></g><g class="message" data-entity-1="part7" data-entity-2="part6" id="msg53"><polygon fill="#181818" points="1147.1792,1973.5195,1137.1792,1977.5195,1147.1792,1981.5195,1143.1792,1977.5195" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="1141.1792" x2="1784.6519" y1="1977.5195" y2="1977.5195"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180.6543" x="1153.1792" y="1972.4536">result: Map&lt;String, String&gt;</text></g><path d="M715,1935.6875 L715,2005.6875 L1120,2005.6875 L1120,1945.6875 L1110,1935.6875 L715,1935.6875" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1110,1935.6875 L1110,1945.6875 L1120,1945.6875 L1110,1935.6875" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="252.478" x="721" y="1952.7544">The result map includes the session_id</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="305.3477" x="721" y="1967.8872">and the client_secret from the payment intent,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="384.3125" x="721" y="1983.02">which is needed by the frontend to complete the payment.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="310.7051" x="721" y="1998.1528">This information is safe to share with the client.</text><g class="message" data-entity-1="part6" data-entity-2="part3" id="msg55"><polygon fill="#181818" points="420.5522,2028.3516,410.5522,2032.3516,420.5522,2036.3516,416.5522,2032.3516" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="414.5522" x2="1130.1792" y1="2032.3516" y2="2032.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167.7939" x="426.5522" y="2027.2856">ResponseEntity.ok(result)</text></g><g class="message" data-entity-1="part3" data-entity-2="part4" id="msg56"><polygon fill="#181818" points="757.3008,2105.8828,767.3008,2109.8828,757.3008,2113.8828,761.3008,2109.8828" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="409.5522" x2="763.3008" y1="2109.8828" y2="2109.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="340.7485" x="416.5522" y="2104.8169">EmbeddedCheckoutProvider(stripePromise, options)</text></g><path d="M131,2045.3516 L131,2160.3516 L394,2160.3516 L394,2055.3516 L384,2045.3516 L131,2045.3516" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M384,2045.3516 L384,2055.3516 L394,2055.3516 L384,2045.3516" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="213.5098" x="137" y="2062.4185">The EmbeddedCheckoutProvider</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199.2085" x="137" y="2077.5513">is a UI component provided by</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210.6787" x="137" y="2092.6841">Stripe that renders the payment</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205.9814" x="137" y="2107.8169">form and handles the payment.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="241.4014" x="137" y="2122.9497">Options argument includes the client</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204.9531" x="137" y="2138.0825">secret from the payment intent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="242.3726" x="137" y="2153.2153">and an onComplete callback function</text><g class="message" data-entity-1="part4" data-entity-2="part5" id="msg58"><polygon fill="#181818" points="951.6489,2224.2461,961.6489,2228.2461,951.6489,2232.2461,955.6489,2228.2461" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="779.3008" x2="957.6489" y1="2228.2461" y2="2228.2461"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141.3052" x="786.3008" y="2223.1802">EmbeddedCheckout()</text></g><path d="M481,2171.2813 L481,2271.2813 L763,2271.2813 L763,2181.2813 L753,2171.2813 L481,2171.2813" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M753,2171.2813 L753,2181.2813 L763,2181.2813 L753,2171.2813" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="251.6655" x="487" y="2188.3481">The EmbeddedCheckout component is</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="247.584" x="487" y="2203.481">responsible for the payment form and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174.2432" x="487" y="2218.6138">handling user interactions.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171.4756" x="487" y="2233.7466">It uses the Stripe.js library</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="261.8599" x="487" y="2248.8794">to securely handle payment information</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="258.2544" x="487" y="2264.0122">and communicate with Stripe's servers.</text><g class="message" data-entity-1="part1" data-entity-2="part5" id="msg60"><polygon fill="#181818" points="951.6489,2294.2109,961.6489,2298.2109,951.6489,2302.2109,955.6489,2298.2109" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="109.0801" x2="957.6489" y1="2298.2109" y2="2298.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="223.082" x="116.0801" y="2293.145">Enter Payment Details and submit</text></g><g class="message" data-entity-1="part5" data-entity-2="part14" id="msg61"><polygon fill="#181818" points="3564.3584,2323.3438,3574.3584,2327.3438,3564.3584,2331.3438,3568.3584,2327.3438" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="973.6489" x2="3570.3584" y1="2327.3438" y2="2327.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="305.9634" x="980.6489" y="2322.2778">confirmPayment(clientSecret, paymentDetails)</text></g><g class="message" data-entity-1="part14" data-entity-2="part5" id="msg62"><polygon fill="#181818" points="984.6489,2352.4766,974.6489,2356.4766,984.6489,2360.4766,980.6489,2356.4766" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="978.6489" x2="3580.3584" y1="2356.4766" y2="2356.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96.002" x="990.6489" y="2351.4106">PaymentIntent</text></g><g class="message" data-entity-1="part5" data-entity-2="part3" id="msg63"><polygon fill="#181818" points="420.5522,2381.6094,410.5522,2385.6094,420.5522,2389.6094,416.5522,2385.6094" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="414.5522" x2="967.6489" y1="2385.6094" y2="2385.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88.9878" x="426.5522" y="2380.5435">onComplete()</text></g><g class="message" data-entity-1="part3" data-entity-2="part2" id="msg64"><polygon fill="#181818" points="251.165,2410.7422,241.165,2414.7422,251.165,2418.7422,247.165,2414.7422" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="245.165" x2="403.5522" y1="2414.7422" y2="2414.7422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130.3872" x="257.165" y="2409.6763">Payment Successful</text></g><?plantuml-src nLXRR-Cs5dxNhpYObt4MYTCk-h966Y29dQrtEnCZZjkN0GQqHDjiPL9BKlQultuFRn9bqPuqyp01aeWK-V5SltCepNH9uQQ-7LF5rXn-fJjQmfp-hwOyfp1cP2t9zkQwllt4P_MoP6e3TmKya6r5pFf1HQI6VrvaMKPoBII-t56fcQ8ooymxbhEAS0tlRcuMqrj4QHPiATSAPcHDtm5Hq9qtq-dzCt8mApw8WfHsOpoHtZBPBcbHqE9XG_C_HQrdKknOGQNTVkhbww2I4CTRSy6r5ANPNpbX7znCIUKdFfeTpyLgjRDdK9MMhA9pAdSifuWuZySMhJDpZ2Hf9HH3xnqC62c2Tv-RUSIyIqnRw7Zw6BdMh6JQmlwnrmiSAOJwZt-qsyFWl51RMZ3IaUT3TyPYDNFdmPovxl9Sr5ntGEVfDv49etVd3_6Udd9DZmwPfT_4Nc_VPGNHP4aKDIU4PuC_6lk1tJU-FvQ6Vj5KScBZmuaETxDfhCbiwdFsdRKRFEsvZpqxjiDCqXK8pCnu3l3dXjqk7gxWhgemNoWyKypu7T5CS5YWi0yesCqrkyqeBm0na1zQPe2hsqIwZs3AcMP4qs058nxRcOa4EMJzEOCRiy6eCnfSj7WTpiZYKOJHfXu2FSrVu9fKx7htuxLthRhE9KMqAp--OjPhdxYR3cmmfqgXMGQoDT6qk0GRqUOXz_bZdfL69w9ZwIMWuSn3N-Y84RBUb16_a-iZSDBSrNeZ9FkhPQaW5oPcLuX6iYE9pmhN9PYiCpH2nImnWXNZnVtXeJbqq9uVONQO9Oj71d5yFuBvvDV9mmly0nwVdpu0AJu770M__p9vdZHwVMO5_1nfsHw2cJE-XwkUY64jcAJB2Xflw8gICBb_FsemOu2kMgJKxLbSQ5WXlnGsntf6J0IctaYn1qxtq1BqHw4V3SZaIquhupqCVOENZ9PkmlpoyZA3dtxu2H037Xj9ZZCabRqJAONCQ8dPt-ZZTCdUms-aP8LHNc-8nZyKQaC4Oe-UCgEmenyueJwCOESna5_aL4ssLIaEb3wjxcl5E0QpYsJIq4oODp65XgLGqfMswdXf65_3VaFnV6c5QBU-LtQTa6l2sL-Erlgo6cupm6qmDSNCkjKBR3QlY9arc669ZPjJ3iLsACzHz37bZBP-j01H93N7_Jtl_WWBJXe-U8k38yrKZPBIGYLolYd78U4nqHUBwNYuac9hLlFrm9FDHPJsRHLldjBvRlVwHBVFBiizP2h58udSvaHoHuVsCzlk6ZcSU5yhi_My0_-MRBQ0tpsHdHu-Y_iExj5UcTSbccCcSVo8JZP5GZaVsxbq4McI4yJgg90OcQy05JLY0jcQtWkqWDo86zw6Ow72loiXjx2YpLPR_M1Qq6s5n_3y0F-bXpPrhRig8riZVfElCA33zJ382KkAsBJLuE8DRfrocph661ZzR_Vh3t1F2kowy9wcz5iysrMP5YwFbLhLPNamZFrYcQuihRLJ3GqmXIRS8nzfD1OYB6afzbyFajSqHwrSTzRblYcnxMTCwzafwxSDTE2Uv_Y4xddz7YlglsrmIhRUQApcHcfWAo3WUpxOOBjCIjIfEA01A8SjAMZMWqaJc0Vvx1h7qBD4iZb2wmYRehM4qa6-1C4bXEkxYNvXoXH8lnW6JpPGINaHe_NDvVB9Rmg6iM0AUSJKMGoRIA4tvD2uhagM6vfngzwUHVyopB92i3Ub41UDbOB69paokZQ6W6pZUB2CGlgeeuxlct4eFYA6fsTXik9zkDO1SJkotlvq3BhBy6U_AyHWaCW5O2jVAleI6dPksAaOJ0ZNZy4EIWpGDuqDExSU15yA8WlZ5iPpWNqYnJqOUrx7RwhBRlLJSyIqEU6x5MdLyRlJ30Z-HeO8GcRsvrIGpgOO7OwHXuwd1txeokYCIB9LKS4UXVhgOo_tj0xAruWzqnlGad2rGWEOGB2ITGhriLjdqwnvIeQ5mnuPfOPE-M4uUEZbJKGBmhwgN2YoeuFErvkKmXXETMLlDAN0QjLGdgIva8NJUpRvE9v-_BVf67IjpXMPa_LY-d4-UNwvNip6To-Jethnkahm5l8t9YWwAxz2-kzxvWuDt975q-c5zQ0kqROVI7NZxWMNuFxV7jtSJ5VYLcEXhKn-btL1tRtCnmLIbbrguinUrqfcRAOeHZHc1tQbTZeupDdoqcxPRrY-iNqDtcXCHtEmIt6FMLJOLYZmIOGnzABXHiPDMBiU4eUAhAZPfJO4EqUN38r8mxOBFMc-r1UU7erWQrC9hkY4QwOFG_7dm9aeLQeJNuyQdZdrANnqyit0fHyEjqXFbo0i0QgeYftylDxtwycbPW4Qay1YQkqlk75SvLuRBqKyxZumIBGibIfsabrZESS4nWR_b5JrlUZQ73nChciV7r68ESVPXUVZgOb0mf667qBGc8PwIR27NDKyj-rFUn4vfNxACtsF3CxO_1MsZkpAtBrAkg1YovBwngtLCPZHBhIcD3N6Vj4nwajYTLFEebDjtZZxEHyD_r1GigKaqddE90ZDQqdBWtTCPCqcdngJegZRcjiEqAMKGyKEo7ILwFOeiOu_EoSCQGGEsG5ZUvbHzXnLBxTCznrpL31pR26Pt7g4WGkHkOsEow27XxtuUgth2tYIXwEwrXUnHn9j50uwlD0BbZFlcepiCiU95YNOTDxSB1Dyv3x1H_EfJ_tMdzZXlVR__m40?></g></svg>